{"version":3,"sources":["utils/constants.js","components/error.js","components/chat/messages/user/text.js","utils/logger.js","utils/data/validators.js","utils/hash.js","utils/params.js","utils/data/index.js","components/chat/messages/info.js","components/utils/avatar/index.js","utils/data/handlers.js","components/chat/messages/margin.js","components/chat/messages/message.js","components/chat/messages/user/index.js","components/chat/messages/system/poll/options.js","components/chat/messages/system/poll/question.js","components/chat/messages/system/poll/result.js","components/chat/messages/system/message.js","components/chat/messages/system/poll/index.js","components/chat/messages/system/external-video/url.js","components/chat/messages/system/external-video/index.js","components/chat/messages/index.js","components/chat/index.js","components/notes/index.js","components/presentation/cursor.js","components/presentation/slide/proxy.js","components/presentation/slide/index.js","components/presentation/canvas/circle.js","components/presentation/canvas/line.js","components/presentation/canvas/path.js","components/presentation/canvas/poll.js","components/presentation/canvas/polygon.js","components/presentation/canvas/polyline.js","components/presentation/canvas/text.js","components/presentation/canvas/index.js","components/presentation/index.js","components/screenshare/index.js","components/thumbnails/image.js","components/thumbnails/thumbnail.js","components/thumbnails/item.js","components/utils/button/index.js","components/thumbnails/buttons/clear.js","components/thumbnails/index.js","components/video/index.js","components/bars/bottom.js","components/bars/top/title.js","components/bars/top/buttons/search.js","components/bars/top/buttons/section.js","components/bars/top/buttons/swap.js","components/bars/top/index.js","components/modals/about/item.js","components/modals/about/body.js","components/modals/about/footer.js","components/modals/about/header.js","components/utils/modal/index.js","components/modals/about/index.js","components/modals/search/body.js","components/modals/search/footer.js","components/modals/search/header.js","utils/actions.js","components/modals/search/index.js","utils/builder.js","utils/layout.js","utils/shortcuts.js","utils/synchronizer.js","components/player.js","components/loader.js","locales/messages/index.js","locales/index.js","index.js"],"names":["BUILD","process","REACT_APP_BBB_PLAYBACK_BUILD","ID","REACT_APP_MEDIA_ROOT_URL","ABOUT","ALTERNATES","CAPTIONS","CHAT","CURSOR","DESKSHARE","ERROR","LOADER","METADATA","NOTES","PANZOOMS","PLAYER","POLLS","EXTERNAL_VIDEOS","PRESENTATION","SCREENSHARE","SEARCH","SETTINGS","SHAPES","SWAP","THUMBNAILS","USERS","VIDEO","LAYOUT","NUMBERS","POSITIONS","intlMessages","defineMessages","aria","id","description","Error","code","intl","useIntl","aria-label","formatMessage","className","Text","active","hyperlink","text","options","cx","inactive","Fragment","defaultProps","params","URLSearchParams","window","location","search","debug","has","logger","info","console","warn","error","hasIndex","index","data","isEmpty","length","hasPresentation","slides","i","src","includes","hasProperty","object","property","hasOwnProperty","hasVideo","player","video","isActive","time","timestamp","clear","cleared","wasCleared","visible","isVisible","isCurrent","item","current","next","isArray","isValid","isString","isEqual","first","second","type","equal","every","value","valid","Array","hash","str","charCodeAt","getSearchParam","name","get","parseTimeToSeconds","patterns","match","hours","minutes","seconds","timeToSeconds","h","parseInt","m","s","buildFileURL","recordId","file","getAvatarStyle","getActiveContent","screenshare","isEnabled","getBar","percentage","bar","p","half","repeat","ltr","document","dir","concat","getCurrentDataIndex","start","stop","middle","Math","floor","getData","config","files","TALKERS","getFileName","canvases","thumbnails","split","shift","getFileType","pop","POLL_TYPES","YN","YNA","TF","POLL_KEYS","Info","milliseconds","getTimestampAsMilliseconds","hourCycle","hour","minute","timeZone","Avatar","icon","initials","handleOnEnterPress","event","action","key","handleAutoScroll","fNode","cNode","direction","align","pNode","parentNode","scrollLeft","firstNode","currentNode","clientWidth","offsetLeft","spacing","parentWidth","horizontalOffset","getScrollLeft","scrollTop","clientHeight","offsetTop","parentHeight","verticalOffset","getScrollTop","Margin","onClick","onKeyPress","tabIndex","Message","children","currentTime","User","areEqual","prevProps","nextProps","React","memo","yes","no","abstention","true","false","Options","answers","map","label","toLowerCase","getPollLabel","question","Question","Result","responders","total","numVotes","toFixed","Poll","Url","url","ExternalVideo","Messages","chat","currentDataIndex","setRef","message","getMessageType","ref","node","Chat","interaction","useRef","useEffect","scroll","aria-live","onMouseEnter","onMouseLeave","Notes","notes","dangerouslySetInnerHTML","__html","Cursor","x","y","style","cy","Proxy","height","width","thumbnail","find","alt","logo","Slide","slide","href","Circle","r","Line","x1","y1","x2","y2","Path","d","image","rect","fill","stroke","strokeWidth","transform","Polygon","points","Polyline","xmlns","line","Canvas","draws","drawsInterval","canvas","shape","j","intermediate","push","buildViewBoxAttr","viewBox","Presentation","currentCursorIndex","currentPanzoomIndex","currentSlideIndex","cursors","panzooms","slideId","getSlideId","currentData","getViewBox","cursor","getCursor","xmlnsXlink","clipPath","Screenshare","media","onPlayerReady","sources","filter","source","buildSources","element","videojs","controls","buildOptions","dispose","data-vjs-player","playsInline","preload","Image","Thumbnail","Item","interactive","handleOnClick","Button","circle","disabled","ghost","solid","default","Clear","handleSearch","Thumbnails","reduce","result","isFiltered","Video","captions","onTimeUpdate","tracks","lang","locale","localeName","kind","srclang","buildTracks","controlBar","fullscreenToggle","pictureInPictureToggle","volumePanel","inline","vertical","inactivityTimeout","playbackRates","rates","on","setInterval","rps","clearInterval","duration","Bottom","about","Title","toggleAbout","date","Date","Search","enabled","toggleSearch","section","Section","toggleSection","swap","Swap","toggleSwap","Top","control","single","green","red","CONTENT","Body","content","users","Footer","Header","metadata","end","subtitle","day","month","year","close","Modal","onClose","About","toggleModal","participants","handleOnChange","maxLength","max","minLength","min","onChange","title","seek","skip","change","useState","setDisabled","setSearch","target","getValue","forEach","indexOf","getSearch","getAttr","attr","getChildren","getId","getNumbers","trimmed","trim","replace","v","parseFloat","buildCanvases","group","canvasAttr","canvasId","g","drawAttr","undo","items","buildStyle","drawId","Object","assign","polyline","polygon","path","switch","foreignObject","child","grandchildren","grandchild","join","parseText","buildShapes","svg","img","in","sort","a","b","buildSlides","build","filename","Promise","resolve","reject","fileType","alternates","presentation","buildAlternates","polls","buildPolls","externalVideos","external_video_url","buildExternalVideos","buildNotes","shapes","explicitChildren","preserveChildrenOrder","charsAsChildren","getOptions","parseStringPromise","then","popcorn","chattimeline","out","decodeXML","clearHyperlink","slice","getInitials","buildChat","recording","position","buildCursor","meeting","meta","end_time","start_time","buildMetadata","panzoom","viewbox","buildPanzooms","start_timestamp","stop_timestamp","buildScreenshare","catch","Layout","layout","this","getContentFromData","getControlFromLayout","getSectionFromLayout","getSwapFromLayout","state","fullscreen","isSingle","isContentVisible","Shortcuts","actions","init","prop","listeners","add","k","listener","addEventListener","e","altKey","shiftKey","removeEventListener","STATUSES","EVENTS","Synchronizer","primary","secondary","status","synching","play","pause","playbackRate","restore","Player","props","application","initControl","modal","initSection","initSwap","initData","handlePlayerReady","bind","handleTimeUpdate","initShortcuts","shortcuts","destroy","found","synchronizer","setState","toggleFullscreen","toggleThumbnails","previous","backward","forward","open","hasFullscreenButton","getContent","getMediaStyle","renderFullscreenButton","toggleApplication","currentChatIndex","renderApplicationIcon","renderApplicationControl","renderApplicationContent","getDraws","currentDrawsInterval","currentDataInterval","getCurrentDataInterval","hasScreenshare","getContentStyle","renderPresentation","renderScreenshare","getBottomContentStyle","renderThumbnails","getPlayerStyle","renderTopBar","renderMedia","renderApplication","renderContent","renderBottomBar","renderModal","PureComponent","Loader","counter","started","param","getTime","initError","setError","loaded","setLoaded","fetchFile","fetch","response","ok","json","update","keys","fetches","medias","method","all","responses","endsWith","fetchMedia","messages","ar","de","en","es","fa","fr","it","ja","pt","ru","tr","RTL_LOCALES","navigator","language","body","setAttribute","setDirection","getLocale","styles","getStyle","ReactDOM","render","rel","getElementById"],"mappings":"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","file":"static/js/main.ad4ecf47.chunk.js","sourcesContent":["const BUILD = process.env.REACT_APP_BBB_PLAYBACK_BUILD;\nconst MEDIA_ROOT_URL = process.env.REACT_APP_MEDIA_ROOT_URL;\nconst NO_ROUTER = process.env.REACT_APP_NO_ROUTER;\n\nconst ID = {\n  ABOUT: 'about',\n  ALTERNATES: 'alternates',\n  CAPTIONS: 'captions',\n  CHAT: 'chat',\n  CURSOR: 'cursor',\n  DESKSHARE: 'deskshare',\n  ERROR: 'error',\n  LOADER: 'loader',\n  METADATA: 'metadata',\n  NOTES: 'notes',\n  PANZOOMS: 'panzooms',\n  PLAYER: 'player',\n  POLLS: 'polls',\n  EXTERNAL_VIDEOS: 'externalVideos',\n  PRESENTATION: 'presentation',\n  SCREENSHARE: 'screenshare',\n  SEARCH: 'search',\n  SETTINGS: 'settings',\n  SHAPES: 'shapes',\n  SWAP: 'swap',\n  THUMBNAILS: 'thumbnails',\n  USERS: 'users',\n  VIDEO: 'video',\n};\n\nconst LAYOUT = {\n  CONTENT: 'content',\n  DISABLED: 'disabled',\n  MEDIA: 'media',\n};\n\nconst NUMBERS = [\n  'zero', 'one', 'two', 'three',\n  'four', 'five', 'six', 'seven',\n  'eight', 'nine', 'ten', 'eleven',\n  'twelve', 'thirteen', 'fourteen', 'fifteen',\n];\n\nconst POSITIONS = {\n  BOTTOM: 'bottom',\n  CENTER: 'center',\n  LEFT: 'left',\n  MIDDLE: 'middle',\n  RIGHT: 'right',\n  TOP: 'top',\n};\n\nconst SHAPES = {\n  CIRCLE: 'circle',\n  LINE: 'line',\n  PATH: 'path',\n  POLL: 'poll',\n  POLYGON: 'polygon',\n  POLYLINE: 'polyline',\n  TEXT: 'text',\n};\n\nconst getRouter = () => {\n  if (typeof NO_ROUTER !== 'undefined') {\n    if (NO_ROUTER) return false;\n  }\n\n  return true;\n};\n\nconst ROUTER = getRouter();\n\nexport {\n  BUILD,\n  ID,\n  LAYOUT,\n  MEDIA_ROOT_URL,\n  NUMBERS,\n  POSITIONS,\n  ROUTER,\n  SHAPES,\n};\n","import React from 'react';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport { ID } from 'utils/constants';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  aria: {\n    id: 'error.wrapper.aria',\n    description: 'Aria label for the error wrapper',\n  },\n});\n\nconst Error = ({ code }) => {\n  const intl = useIntl();\n\n  return (\n    <div\n      aria-label={intl.formatMessage(intlMessages.aria)}\n      className=\"error-wrapper\"\n      id={ID.ERROR}\n    >\n      <div className=\"error-code\">\n        {code}\n      </div>\n    </div>\n  );\n};\n\nexport default Error;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Linkify from 'linkifyjs/react';\nimport cx from 'classnames';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  hyperlink: PropTypes.bool,\n  text: PropTypes.string,\n};\n\nconst defaultProps = {\n  active: false,\n  hyperlink: false,\n  text: '',\n};\n\nconst Text = ({\n  active,\n  hyperlink,\n  text,\n}) => {\n  if (hyperlink) {\n    const options = {\n      className: cx('linkified', { inactive: !active }),\n    };\n\n    return (\n      <Linkify options={options}>\n        {text}\n      </Linkify>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      {text}\n    </React.Fragment>\n  );\n};\n\nText.propTypes = propTypes;\nText.defaultProps = defaultProps;\n\nexport default Text;\n","const params = new URLSearchParams(window.location.search);\nconst debug = params ? params.has('debug') : false;\n\nconst logger = {\n  info: (...msg) => console.info(...msg),\n  debug: (...msg) => debug ? console.debug(...msg) : null,\n  warn: (...msg) => debug ? console.warn(...msg) : null,\n  error: (...msg) => console.error(...msg),\n};\n\nexport default logger;\n","import { LAYOUT } from 'utils/constants';\nimport logger from 'utils/logger';\n\nconst hasIndex = (index, data) => {\n  if (index < 0) return false;\n\n  if (isEmpty(data)) return false;\n\n  if (index >= data.length) {\n    logger.error('out of bounds', index, data);\n\n    return false;\n  }\n\n  return true;\n};\n\nconst hasPresentation = slides => {\n  if (isEmpty(slides)) return false;\n\n  for (let i = 0; i < slides.length; i++) {\n    const { src } = slides[i];\n\n    if (src.includes('slide')) return true;\n  }\n\n  return false;\n};\n\nconst hasProperty = (object, property) => {\n  if (object && object.hasOwnProperty(property)) {\n    if (typeof object[property] !== 'undefined') return true;\n  }\n\n  logger.warn('missing', property, object);\n\n  return false;\n};\n\nconst hasVideo = (player) => {\n  if (player && player.video) return true;\n\n  return false;\n};\n\nconst isActive = (time, timestamp, clear = -1) => {\n  const cleared = wasCleared(time, clear);\n  const visible = isVisible(time, timestamp);\n\n  return visible && !cleared;\n};\n\nconst isContentVisible = (layout, swap) => {\n  const {\n    CONTENT,\n    MEDIA,\n  } = LAYOUT;\n\n  let visible;\n  switch (layout) {\n    case  CONTENT:\n      visible = !swap;\n      break;\n    case MEDIA:\n      visible = swap;\n      break;\n    default:\n      visible = false;\n  }\n\n  return visible;\n};\n\nconst isCurrent = (data, index, time) => {\n  if (!hasIndex(index, data)) return false;\n\n  const item = data[index];\n  if (!hasProperty(item, 'timestamp')) return false;\n\n  let current = false;\n  if (isVisible(time, item.timestamp)) {\n    if (index + 1 < data.length) {\n      const next = data[index + 1];\n      if (hasProperty(next, 'timestamp')) {\n        current = !isVisible(time, next.timestamp);\n      }\n    } else {\n      current = true;\n    }\n  }\n\n  return current;\n};\n\nconst isEmpty = data => {\n  const isArray = isValid('array', data);\n  const isString = isValid('string', data);\n  if (!isArray && !isString) return true;\n\n  const empty = data.length === 0;\n\n  return empty;\n};\n\nconst isEnabled = (data, time) => {\n  if (isEmpty(data)) return false;\n\n  for (let index = 0; index < data.length; index++) {\n    const item = data[index];\n    if (hasProperty(item, 'timestamp') && hasProperty(item, 'clear')) {\n      const {\n        clear,\n        timestamp,\n      } = item;\n\n      // Check if it was activated and did not ended\n      if (isActive(time, timestamp, clear)) return true;\n\n      // Check if we are searching over the present time value\n      if (!isVisible(time, timestamp)) return false;\n    } else {\n      // Invalid item\n      return false;\n    }\n  }\n\n  return false;\n};\n\nconst isEqual = (first, second, type = 'array') => {\n  let equal = false;\n\n  switch (type) {\n    case 'array':\n      if (first.length === second.length) {\n        equal = first.every((value, index) => value === second[index])\n      }\n\n      return equal;\n    default:\n      return equal;\n  }\n};\n\nconst isValid = (type, data) => {\n  let valid = false;\n\n  switch (type) {\n    case 'array':\n      if (Array.isArray(data)) valid = true;\n      break;\n    case 'string':\n      if (typeof data === type) valid = true;\n      break;\n    default:\n      logger.debug('unhandled', type);\n  }\n\n  return valid;\n};\n\nconst isVisible = (time, timestamp) => timestamp <= time;\n\nconst wasCleared = (time, clear) => clear !== -1 && clear <= time;\n\nexport {\n  hasIndex,\n  hasPresentation,\n  hasProperty,\n  hasVideo,\n  isActive,\n  isContentVisible,\n  isCurrent,\n  isEmpty,\n  isEnabled,\n  isEqual,\n  isValid,\n  isVisible,\n  wasCleared,\n};\n","// @ironwallaby's string-hash\n// https://github.com/darkskyapp/string-hash\nconst hash = (str) => {\n  let hash = 5381;\n\n  let i = str.length;\n  while (i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */\n  return hash >>> 0;\n};\n\nexport default hash;\n","import config from 'config';\nimport { ROUTER } from './constants';\nimport logger from './logger';\n\nconst getLayout = () => {\n  const param = getSearchParam('l');\n\n  if (param) return param;\n\n  return null;\n};\n\nconst getMediaPath = () => {\n  const param = getSearchParam('p');\n\n  let mediaPath = '';\n  if (param) mediaPath = param;\n\n  return mediaPath;\n};\n\nconst getRecordId = match => {\n  if (!ROUTER) return 'local';\n\n  if (match) {\n    const { params } = match;\n    if (params && params.recordId) {\n      const { recordId } = params;\n      const regex = /^[a-z0-9]{40}-[0-9]{13}$/;\n\n      if (recordId.match(regex)) return recordId;\n    }\n  }\n\n  logger.error('missing', 'recordId');\n\n  return null;\n};\n\nconst getSearchParam = (name) => {\n  const params = new URLSearchParams(window.location.search);\n\n  if (params && params.has(name)) {\n    const param = params.get(name);\n\n    return param;\n  }\n\n  return null;\n};\n\nconst getStyle = () => {\n  const param = getSearchParam('s');\n  const { styles } = config;\n  const { url } = styles;\n\n  let style = styles.default ? `${url}/${styles.default}.css` : null;\n  if (param) {\n    const { valid } = styles;\n    if (valid.includes(param)) {\n      style = `${url}/${param}.css`;\n    }\n  }\n\n  return style;\n};\n\nconst getTime = () => {\n  const param = getSearchParam('t');\n\n  if (param) return parseTimeToSeconds(param);\n\n  return null;\n};\n\nconst parseTimeToSeconds = time => {\n  const patterns = [\n    /^(\\d+)h(\\d+)m(\\d+)s$/,\n    /^(\\d+)m(\\d+)s$/,\n    /^(\\d+)s$/,\n  ];\n\n  for (let i = 0; i < patterns.length; i++) {\n    if (time.match(patterns[i])) {\n      const hours = time.match(/(\\d+)h/);\n      const minutes = time.match(/(\\d+)m/);\n      const seconds = time.match(/(\\d+)s/);\n\n      let timeToSeconds = 0;\n\n      if (hours) {\n        const h = parseInt(hours[1]);\n        if (h >= 0) timeToSeconds += h * 3600;\n      }\n\n      if (minutes) {\n        const m = parseInt(minutes[1]);\n        if (m >= 0 && m < 60) {\n          timeToSeconds += m * 60;\n        } else {\n          return null;\n        }\n      }\n\n      if (seconds) {\n        const s = parseInt(seconds[1]);\n        if (s >= 0 && s < 60) {\n          timeToSeconds += s;\n        } else {\n          return null;\n        }\n      }\n\n      return timeToSeconds;\n    }\n  }\n\n  return null;\n};\n\nexport {\n  getLayout,\n  getMediaPath,\n  getRecordId,\n  getStyle,\n  getTime,\n  parseTimeToSeconds,\n};\n","import config from 'config';\nimport {\n  hasIndex,\n  hasPresentation,\n  hasProperty,\n  isCurrent,\n  isEmpty,\n  isEnabled,\n  isVisible,\n  wasCleared,\n} from './validators';\nimport {\n  ID,\n  LAYOUT,\n  MEDIA_ROOT_URL,\n  NUMBERS,\n  ROUTER,\n} from 'utils/constants';\nimport hash from 'utils/hash';\nimport logger from 'utils/logger';\nimport { getMediaPath } from 'utils/params';\n\nconst buildFileURL = (recordId, file) => {\n  if (!ROUTER) return file;\n\n  const mediaPath = getMediaPath();\n\n  const rootUrl = MEDIA_ROOT_URL ? MEDIA_ROOT_URL : '/presentation';\n\n  let fileUrl = `${recordId}/${file}`;\n  if (mediaPath) fileUrl = `${mediaPath}/${fileUrl}`;\n\n  return `${rootUrl}/${fileUrl}`;\n};\n\nconst getAvatarStyle = name => {\n  const index = hash(name) % NUMBERS.length;\n\n  return `avatar-${NUMBERS[index]}`;\n};\n\nconst getActiveContent = (screenshare, time) => {\n  const {\n    SCREENSHARE,\n    PRESENTATION,\n  } = ID;\n\n  const content = isEnabled(screenshare, time) ? SCREENSHARE : PRESENTATION;\n\n  return content;\n};\n\nconst FULL_BLOCK = '';\nconst LEFT_HALF_BLOCK = '';\nconst RIGHT_HALF_BLOCK = '';\nconst EMPTY_BLOCK = '-';\n\nconst getBar = (percentage) => {\n  const p = parseInt(percentage);\n\n  let bar;\n  if (p === 0) {\n    bar = EMPTY_BLOCK;\n  } else {\n    const full = p / 10;\n    const half = (p % 10) > 2;\n\n    bar = FULL_BLOCK.repeat(full);\n\n    if (half) {\n      // Add true fallback for the tests\n      const ltr = document.dir ? document.dir === 'ltr' : true;\n      bar = bar.concat(ltr ? LEFT_HALF_BLOCK : RIGHT_HALF_BLOCK);\n    }\n  }\n\n  return bar;\n};\n\nconst getContentFromData = data => {\n  const captions = getData(data, ID.CAPTIONS);\n  const chat = getData(data, ID.CHAT);\n  const notes = getData(data, ID.NOTES);\n  const polls = getData(data, ID.POLLS);\n  const externalVideos = getData(data, ID.EXTERNAL_VIDEOS);\n  const screenshare = getData(data, ID.SCREENSHARE);\n  const shapes = getData(data, ID.SHAPES);\n  const slides = shapes.slides;\n\n  const content = {\n    captions: !isEmpty(captions),\n    chat: !isEmpty(chat),\n    notes: !isEmpty(notes),\n    polls: !isEmpty(polls),\n    externalVideos: !isEmpty(externalVideos),\n    presentation: hasPresentation(slides),\n    screenshare: !isEmpty(screenshare),\n  };\n\n  return content;\n};\n\nconst getControlFromLayout = layout => {\n  const { DISABLED } = LAYOUT;\n  let control = true;\n  switch (layout) {\n    case DISABLED:\n      control = false;\n      break;\n    default:\n  }\n\n  return control;\n};\n\nconst getCurrentDataIndex = (data, time) => {\n  if (isEmpty(data)) return -1;\n\n  let start = 0;\n  let stop = data.length - 1;\n  let middle = Math.floor((start + stop) / 2);\n\n  while (!isCurrent(data, middle, time) && start < stop) {\n    const item = data[middle];\n    if (!hasProperty(item, 'timestamp')) return -1;\n\n    if (!isVisible(time, item.timestamp)) {\n      stop = middle - 1;\n    } else {\n      start = middle + 1;\n    }\n\n    middle = Math.floor((start + stop) / 2);\n  }\n\n  const current = isCurrent(data, middle, time);\n\n  return (!current) ? -1 : middle;\n};\n\nconst getCurrentDataInterval = (data, time) => {\n  const currentDataInterval = [];\n\n  if (isEmpty(data)) return currentDataInterval;\n\n  for (let index = 0; index < data.length; index++) {\n    const item = data[index];\n    if (hasProperty(item, 'timestamp') && hasProperty(item, 'clear')) {\n      const {\n        clear,\n        timestamp,\n      } = item;\n\n      if (!isVisible(time, timestamp)) break;\n\n      currentDataInterval.push(!wasCleared(time, clear));\n    }\n  }\n\n  return currentDataInterval;\n};\n\nconst getData = (data, id) => {\n  const file = config.files.data[id];\n\n  switch (id) {\n    case ID.ALTERNATES:\n    case ID.CAPTIONS:\n    case ID.CHAT:\n    case ID.CURSOR:\n    case ID.NOTES:\n    case ID.PANZOOMS:\n    case ID.POLLS:\n    case ID.EXTERNAL_VIDEOS:\n    case ID.SCREENSHARE:\n    case ID.TALKERS:\n      if (!file || data[getFileName(file)] === null) {\n        return [];\n      }\n\n      return data[getFileName(file)];\n    case ID.METADATA:\n      if (!file || data[getFileName(file)] === null) {\n        logger.error('missing', id);\n        return {};\n      }\n\n      return data[getFileName(file)];\n    case ID.SHAPES:\n      if (!file || data[getFileName(file)] === null) {\n        return {\n          canvases: [],\n          slides: [],\n          thumbnails: [],\n        };\n      }\n\n      return data[getFileName(file)];\n    default:\n      logger.debug('unhandled', id);\n      return [];\n  }\n};\n\nconst getDraws = (index, slides, canvases) => {\n  if (!hasIndex(index, slides)) return [];\n\n  const slide = slides[index];\n\n  if (isEmpty(canvases)) return [];\n\n  const canvas = canvases.find(canvas => slide.id === canvas.id);\n\n  if (!canvas) return [];\n\n  const { draws } = canvas;\n\n  return draws;\n};\n\nconst getFileName = file => file.split('.').shift();\n\nconst getFileType = file => file.split('.').pop();\n\nconst getPercentage = (value, total) => {\n  if (total === 0) return 0;\n\n  return ((value / total) * 100).toFixed(1);\n};\n\nconst POLL_TYPES = {\n  YN: 'YN',\n  YNA: 'YNA',\n  TF: 'TF',\n};\n\nconst POLL_KEYS = [\n  'Yes',\n  'No',\n  'Abstention',\n  'True',\n  'False',\n];\n\nconst getPollLabel = (key, type) => {\n  if (!POLL_TYPES[type]) return null;\n\n  if (!POLL_KEYS.includes(key)) return null;\n\n  return key.toLowerCase();\n};\n\nconst getSectionFromLayout = layout => {\n  const {\n    CONTENT,\n    MEDIA,\n  } = LAYOUT;\n\n  let section = true;\n  switch (layout) {\n    case CONTENT:\n      section = false;\n      break;\n    case MEDIA:\n      section = false;\n      break;\n    default:\n  }\n\n  return section;\n};\n\nconst getSwapFromLayout = layout => {\n  const {\n    CONTENT,\n    MEDIA,\n  } = LAYOUT;\n\n  let swap = false;\n  switch (layout) {\n    case CONTENT:\n      swap = false;\n      break;\n    case MEDIA:\n      swap = true;\n      break;\n    default:\n  }\n\n  return swap;\n};\n\nconst getMessageType = (item) => {\n  if (typeof item.message === 'string') return ID.USERS;\n  if (typeof item.question === 'string') return ID.POLLS;\n  if (typeof item.url === 'string') return ID.EXTERNAL_VIDEOS;\n\n  return 'undefined';\n};\n\nconst getTimestampAsMilliseconds = timestamp => timestamp * 1000;\n\nexport {\n  buildFileURL,\n  getAvatarStyle,\n  getActiveContent,\n  getBar,\n  getContentFromData,\n  getControlFromLayout,\n  getCurrentDataIndex,\n  getCurrentDataInterval,\n  getData,\n  getDraws,\n  getFileName,\n  getFileType,\n  getMessageType,\n  getPercentage,\n  getPollLabel,\n  getSectionFromLayout,\n  getSwapFromLayout,\n  getTimestampAsMilliseconds,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedTime } from 'react-intl';\nimport cx from 'classnames';\nimport { getTimestampAsMilliseconds } from 'utils/data';\nimport './index.scss';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  name: PropTypes.string,\n  timestamp: PropTypes.number,\n};\n\nconst defaultProps = {\n  active: false,\n  name: '',\n  timestamp: 0,\n};\n\nconst Info = ({\n  active,\n  name,\n  timestamp,\n}) => {\n  const milliseconds = getTimestampAsMilliseconds(timestamp);\n\n  return (\n    <div className=\"info\">\n      <div className={cx('name', { inactive: !active })}>\n        {name}\n      </div>\n      <div className={cx('time', { inactive: !active })}>\n        <FormattedTime\n          hourCycle=\"h23\"\n          hour=\"numeric\"\n          minute=\"numeric\"\n          second=\"numeric\"\n          timeZone=\"UTC\"\n          value={milliseconds}\n        />\n      </div>\n    </div>\n  );\n};\n\nInfo.propTypes = propTypes;\nInfo.defaultProps = defaultProps;\n\nexport default Info;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { getAvatarStyle } from 'utils/data';\nimport './index.scss';\n\nconst propTypes = {\n  icon: PropTypes.string,\n  initials: PropTypes.string,\n  name: PropTypes.string,\n};\n\nconst defaultProps = {\n  icon: '',\n  initials: '',\n  name: '',\n};\n\nconst Avatar = ({\n  icon,\n  initials,\n  name,\n}) => {\n\n  return (\n    <div className=\"avatar-wrapper\">\n      <div className={cx('avatar', getAvatarStyle(name))}>\n        {icon ? (\n          <span className={`icon-${icon}`} />\n        ) : (\n          <span className=\"initials\">\n            {initials}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n\nAvatar.propTypes = propTypes;\nAvatar.defaultProps = defaultProps;\n\nexport default Avatar;\n","import { POSITIONS } from 'utils/constants';\nimport logger from 'utils/logger';\n\nconst getScrollLeft = (firstNode, currentNode, align) => {\n  if (!currentNode) return 0;\n\n  const {\n    clientWidth,\n    offsetLeft,\n    parentNode,\n  } = currentNode;\n\n  if (!firstNode || !parentNode) return 0;\n\n  const ltr = document.dir === 'ltr';\n  const spacing = ltr ? firstNode.offsetLeft : 0;\n  const parentWidth = parentNode.clientWidth;\n\n  let horizontalOffset = 0;\n  switch (align) {\n    case POSITIONS.LEFT:\n      horizontalOffset = offsetLeft - spacing;\n      break;\n    case POSITIONS.CENTER:\n      horizontalOffset = parseInt(offsetLeft + (clientWidth - spacing - parentWidth) / 2, 10);\n      break;\n    case POSITIONS.RIGHT:\n      horizontalOffset = offsetLeft + clientWidth - parentWidth;\n      break;\n    default:\n      logger.debug('unhandled', align);\n  }\n\n  return horizontalOffset;\n};\n\nconst getScrollTop = (firstNode, currentNode, align) => {\n  if (!currentNode) return 0;\n\n  const {\n    clientHeight,\n    offsetTop,\n    parentNode,\n  } = currentNode;\n\n  if (!firstNode || !parentNode) return 0;\n\n  const spacing = firstNode.offsetTop;\n  const parentHeight = parentNode.clientHeight;\n\n  let verticalOffset = 0;\n  switch (align) {\n    case POSITIONS.TOP:\n      verticalOffset = offsetTop - spacing;\n      break;\n    case POSITIONS.MIDDLE:\n      verticalOffset = parseInt(offsetTop + (clientHeight - spacing - parentHeight) / 2, 10);\n      break;\n    case POSITIONS.BOTTOM:\n      verticalOffset = offsetTop + clientHeight - parentHeight;\n      break;\n    default:\n      logger.debug('unhandled', align);\n  }\n\n  return verticalOffset;\n};\n\nconst handleOnEnterPress = (event, action) => {\n  if (event && event.key === 'Enter') {\n    if (typeof action === 'function') action();\n  }\n};\n\nconst handleAutoScroll = (fNode, cNode, direction, align) => {\n  // Auto-scroll can start after getting the first and current nodes\n  if (fNode && cNode) {\n    const { parentNode: pNode } = cNode;\n\n    switch (direction) {\n      case POSITIONS.LEFT:\n        pNode.scrollLeft = getScrollLeft(fNode, cNode, align);\n        break;\n      case POSITIONS.TOP:\n        pNode.scrollTop = getScrollTop(fNode, cNode, align);\n        break;\n      default:\n        logger.debug('unhandled', direction);\n    }\n  }\n};\n\nexport {\n  getScrollLeft,\n  getScrollTop,\n  handleAutoScroll,\n  handleOnEnterPress,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Avatar from 'components/utils/avatar';\nimport { handleOnEnterPress } from 'utils/data/handlers';\nimport './index.scss';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  icon: PropTypes.string,\n  initials: PropTypes.string,\n  name: PropTypes.string,\n  onClick: PropTypes.func,\n};\n\nconst defaultProps = {\n  active: false,\n  icon: '',\n  initials: '',\n  name: '',\n  onClick: () => {},\n};\n\nconst Margin = ({\n  active,\n  icon,\n  initials,\n  name,\n  onClick,\n}) => {\n\n  return (\n    <div\n      className={cx('interactive', { inactive: !active })}\n      onClick={onClick}\n      onKeyPress={event => handleOnEnterPress(event, onClick)}\n      tabIndex=\"0\"\n    >\n      <Avatar\n        active={active}\n        icon={icon}\n        initials={initials}\n        name={name}\n      />\n    </div>\n  );\n};\n\nMargin.propTypes = propTypes;\nMargin.defaultProps = defaultProps;\n\nexport default Margin;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Info from './info';\nimport Margin from './margin';\nimport './index.scss';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]),\n  icon: PropTypes.string,\n  initials: PropTypes.string,\n  name: PropTypes.string,\n  player: PropTypes.object,\n  timestamp: PropTypes.number,\n};\n\nconst defaultProps = {\n  active: false,\n  children: null,\n  icon: '',\n  initials: '',\n  name: '',\n  player: {},\n  timestamp: 0,\n};\n\nconst Message = ({\n  active,\n  children,\n  icon,\n  initials,\n  name,\n  player,\n  timestamp,\n}) => {\n  const handleOnClick = () => {\n    if (player) player.currentTime(timestamp);\n  };\n\n  return (\n    <div className=\"message\">\n      <Margin\n        active={active}\n        icon={icon}\n        initials={initials}\n        name={name}\n        onClick={() => handleOnClick()}\n      />\n      <div className=\"data\">\n        <Info\n          active={active}\n          name={name}\n          timestamp={timestamp}\n        />\n        <div className={cx('text', { inactive: !active })}>\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nMessage.propTypes = propTypes;\nMessage.defaultProps = defaultProps;\n\nexport default Message;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Text from './text';\nimport Message from 'components/chat/messages/message';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  hyperlink: PropTypes.bool,\n  initials: PropTypes.string,\n  name: PropTypes.string,\n  player: PropTypes.object,\n  text: PropTypes.string,\n  timestamp: PropTypes.timestamp,\n};\n\nconst defaultProps = {\n  active: false,\n  hyperlink: false,\n  initials: '',\n  name: '',\n  player: {},\n  text: '',\n  timestamp: 0,\n};\n\nconst User = ({\n  active,\n  hyperlink,\n  initials,\n  name,\n  player,\n  text,\n  timestamp,\n}) => {\n\n  return (\n    <Message\n      active={active}\n      initials={initials}\n      name={name}\n      player={player}\n      timestamp={timestamp}\n    >\n      <Text\n        active={active}\n        hyperlink={hyperlink}\n        text={text}\n      />\n    </Message>\n  );\n};\n\nUser.propTypes = propTypes;\nUser.defaultProps = defaultProps;\n\n// Checks the message active state\nconst areEqual = (prevProps, nextProps) => {\n  if (prevProps.active !== nextProps.active) return false;\n\n  if (!prevProps.player && nextProps.player) return false;\n\n  return true;\n};\n\nexport default React.memo(User, areEqual);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport { getPollLabel } from 'utils/data';\nimport { isEmpty } from 'utils/data/validators';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  options: {\n    id: 'player.chat.message.poll.options',\n    description: 'Label for the poll message answer options',\n  },\n  yes: {\n    id: 'player.chat.message.poll.option.yes',\n    description: 'Label for poll option yes',\n  },\n  no: {\n    id: 'player.chat.message.poll.option.no',\n    description: 'Label for poll option no',\n  },\n  abstention: {\n    id: 'player.chat.message.poll.option.abstention',\n    description: 'Label for poll option abstention',\n  },\n  true: {\n    id: 'player.chat.message.poll.option.true',\n    description: 'Label for poll option true',\n  },\n  false: {\n    id: 'player.chat.message.poll.option.false',\n    description: 'Label for poll option false',\n  },\n});\n\nconst propTypes = {\n  answers: PropTypes.array,\n  type: PropTypes.string,\n};\n\nconst defaultProps = {\n  answers: [],\n  type: '',\n};\n\nconst Options = ({\n  answers,\n  type,\n}) => {\n  const intl = useIntl();\n\n  if (isEmpty(answers)) return null;\n\n  return (\n    <div className=\"poll-options\">\n      <div className=\"poll-label\">\n        {intl.formatMessage(intlMessages.options)}\n      </div>\n      {answers.map((item) => {\n        const {\n          id,\n          key,\n        } = item;\n\n        const label = getPollLabel(key, type);\n\n        return(\n          <div>\n            {id + 1}: {label ? intl.formatMessage(intlMessages[label]) : key}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nOptions.propTypes = propTypes;\nOptions.defaultProps = defaultProps;\n\nexport default Options;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport { isEmpty } from 'utils/data/validators';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  question: {\n    id: 'player.chat.message.poll.question',\n    description: 'Label for the poll message question',\n  },\n});\n\nconst propTypes = { question: PropTypes.string };\n\nconst defaultProps = { question: '' };\n\nconst Question = ({ question }) => {\n  const intl = useIntl();\n\n  if (isEmpty(question)) return null;\n\n  return (\n    <div className=\"poll-question\">\n      <div className=\"poll-label\">\n        {intl.formatMessage(intlMessages.question)}\n      </div>\n      {question}\n    </div>\n  );\n};\n\nQuestion.propTypes = propTypes;\nQuestion.defaultProps = defaultProps;\n\nexport default Question;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  getBar,\n  getPercentage,\n} from 'utils/data';\nimport { isEmpty } from 'utils/data/validators';\nimport './index.scss';\n\nconst propTypes = {\n  answers: PropTypes.array,\n  responders: PropTypes.number,\n};\n\nconst defaultProps = {\n  answers: [],\n  responders: 0,\n};\n\nconst Result = ({\n  answers,\n  responders,\n}) => {\n  if (isEmpty(answers)) return null;\n\n  return (\n    <div className=\"poll-result\">\n      {answers.map((item) => {\n        const {\n          id,\n          numVotes,\n        } = item;\n\n        const percentage = getPercentage(numVotes, responders);\n\n        return(\n          <div className=\"poll-label\">\n            {id + 1}: <span className=\"poll-bar\">{getBar(percentage)}</span> {percentage}%\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nResult.propTypes = propTypes;\nResult.defaultProps = defaultProps;\n\nexport default Result;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport BaseMessage from 'components/chat/messages/message';\nimport './index.scss';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]),\n  icon: PropTypes.string,\n  name: PropTypes.string,\n  player: PropTypes.object,\n  timestamp: PropTypes.number,\n};\n\nconst defaultProps = {\n  active: false,\n  children: null,\n  icon: '',\n  name: '',\n  player: {},\n  timestamp: 0,\n};\n\nconst Message = ({\n  active,\n  children,\n  icon,\n  name,\n  player,\n  timestamp,\n}) => {\n\n  return (\n    <BaseMessage\n      active={active}\n      icon={icon}\n      name={name}\n      player={player}\n      timestamp={timestamp}\n    >\n      <div className=\"system-message-wrapper\">\n        {children}\n      </div>\n    </BaseMessage>\n  );\n};\n\nMessage.propTypes = propTypes;\nMessage.defaultProps = defaultProps;\n\nexport default Message;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport Options from './options';\nimport Question from './question';\nimport Result from './result';\nimport SystemMessage from 'components/chat/messages/system/message';\nimport { ID } from 'utils/constants';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  name: {\n    id: 'player.chat.message.poll.name',\n    description: 'Label for the poll message name',\n  },\n});\n\nconst propTypes = {\n  active: PropTypes.bool,\n  answers: PropTypes.array,\n  player: PropTypes.object,\n  question: PropTypes.string,\n  responders: PropTypes.number,\n  timestamp: PropTypes.number,\n  type: PropTypes.string,\n};\n\nconst defaultProps = {\n  active: false,\n  answers: [],\n  player: {},\n  question: '',\n  responders: 0,\n  timestamp: 0,\n  type: '',\n};\n\nconst Poll = ({\n  active,\n  answers,\n  player,\n  question,\n  responders,\n  timestamp,\n  type,\n}) => {\n  const intl = useIntl();\n\n  return (\n    <SystemMessage\n      active={active}\n      icon={ID.POLLS}\n      name={intl.formatMessage(intlMessages.name)}\n      player={player}\n      timestamp={timestamp}\n    >\n      <Question question={question} />\n      <Result\n        answers={answers}\n        responders={responders}\n      />\n      <Options\n        answers={answers}\n        type={type}\n      />\n    </SystemMessage>\n  );\n};\n\nPoll.propTypes = propTypes;\nPoll.defaultProps = defaultProps;\n\n// Checks the message active state\nconst areEqual = (prevProps, nextProps) => {\n  if (prevProps.active !== nextProps.active) return false;\n\n  if (!prevProps.player && nextProps.player) return false;\n\n  return true;\n};\n\nexport default React.memo(Poll, areEqual);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { isEmpty } from 'utils/data/validators';\nimport Linkify from 'linkifyjs/react';\nimport cx from 'classnames';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  url: PropTypes.string,\n};\n\nconst defaultProps = {\n  active: false,\n  url: '',\n};\n\nconst Url = ({\n  active,\n  url,\n}) => {\n  if (isEmpty(url)) return null;\n\n  const options = {\n    className: cx('linkified', { inactive: !active }),\n  };\n\n  return (\n    <Linkify options={options}>\n      {url}\n    </Linkify>\n  );\n};\n\nUrl.propTypes = propTypes;\nUrl.defaultProps = defaultProps;\n\nexport default Url;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport Url from './url';\nimport SystemMessage from 'components/chat/messages/system/message';\nimport { ID } from 'utils/constants';\n\nconst intlMessages = defineMessages({\n  name: {\n    id: 'player.chat.message.externalVideo.name',\n    description: 'Label for the external video message name',\n  },\n});\n\nconst propTypes = {\n  active: PropTypes.bool,\n  player: PropTypes.object,\n  url: PropTypes.url,\n  timestamp: PropTypes.number,\n};\n\nconst defaultProps = {\n  active: false,\n  player: {},\n  url: '',\n  timestamp: 0,\n};\n\nconst ExternalVideo = ({\n  active,\n  player,\n  url,\n  timestamp,\n}) => {\n  const intl = useIntl();\n\n  return (\n    <SystemMessage\n      active={active}\n      icon={ID.EXTERNAL_VIDEOS}\n      name={intl.formatMessage(intlMessages.name)}\n      player={player}\n      timestamp={timestamp}\n    >\n      <Url\n        active={active}\n        url={url}\n      />\n    </SystemMessage>\n  );\n};\n\nExternalVideo.propTypes = propTypes;\nExternalVideo.defaultProps = defaultProps;\n\n// Checks the message active state\nconst areEqual = (prevProps, nextProps) => {\n  if (prevProps.active !== nextProps.active) return false;\n\n  if (!prevProps.player && nextProps.player) return false;\n\n  return true;\n};\n\nexport default React.memo(ExternalVideo, areEqual);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport UserMessage from './user';\nimport PollMessage from './system/poll';\nimport ExternalVideoMessage from './system/external-video';\nimport { ID } from 'utils/constants';\nimport { getMessageType } from 'utils/data';\nimport './index.scss';\n\nconst propTypes = {\n  chat: PropTypes.array,\n  currentDataIndex: PropTypes.number,\n  player: PropTypes.object,\n  setRef: PropTypes.func,\n};\n\nconst defaultProps = {\n  chat: [],\n  currentDataIndex: 0,\n  player: {},\n  setRef: () => {},\n};\n\nconst Messages = ({\n  chat,\n  currentDataIndex,\n  player,\n  setRef,\n}) => {\n\n  return (\n    <div className=\"list\">\n      <div className=\"message-wrapper\">\n        {chat.map((item, index) => {\n          const active = index <= currentDataIndex;\n          const { timestamp } = item;\n          const type = getMessageType(item);\n          switch (type) {\n            case ID.USERS:\n\n              return (\n                <span ref={node => setRef(node, index)}>\n                  <UserMessage\n                    active={active}\n                    hyperlink={item.hyperlink}\n                    initials={item.initials}\n                    name={item.name}\n                    player={player}\n                    text={item.message}\n                    timestamp={timestamp}\n                  />\n                </span>\n              );\n            case ID.POLLS:\n\n              return (\n                <span ref={node => setRef(node, index)}>\n                  <PollMessage\n                    active={active}\n                    answers={item.answers}\n                    player={player}\n                    question={item.question}\n                    responders={item.responders}\n                    timestamp={timestamp}\n                    type={item.type}\n                  />\n                </span>\n              );\n            case ID.EXTERNAL_VIDEOS:\n\n              return (\n                <span ref={node => setRef(node, index)}>\n                  <ExternalVideoMessage\n                    active={active}\n                    player={player}\n                    url={item.url}\n                    timestamp={timestamp}\n                    type={item.type}\n                  />\n                </span>\n              );\n            default:\n              return <span ref={node => setRef(node, index)} />;\n          }\n        })}\n      </div>\n    </div>\n  );\n};\n\nMessages.propTypes = propTypes;\nMessages.defaultProps = defaultProps;\n\nexport default Messages;\n","import React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport { chat as config } from 'config';\nimport Messages from './messages';\nimport {\n  ID,\n  POSITIONS,\n} from 'utils/constants';\nimport { handleAutoScroll } from 'utils/data/handlers';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  aria: {\n    id: 'player.chat.wrapper.aria',\n    description: 'Aria label for the chat wrapper',\n  },\n});\n\nconst propTypes = {\n  chat: PropTypes.array,\n  currentDataIndex: PropTypes.number,\n  player: PropTypes.object,\n};\n\nconst defaultProps = {\n  chat: [],\n  currentDataIndex: 0,\n  player: {},\n};\n\nconst Chat = ({\n  chat,\n  currentDataIndex,\n  player,\n}) => {\n  const interaction = useRef(false);\n  const firstNode = useRef();\n  const currentNode = useRef();\n\n  const intl = useIntl();\n\n  const setRef = (node, index) => {\n    if (index === 0) {\n      firstNode.current = node;\n    }\n\n    if (index === currentDataIndex) {\n      currentNode.current = node;\n    }\n  };\n\n  useEffect(() => {\n    if (!interaction.current) {\n      if (config.scroll) {\n        handleAutoScroll(firstNode.current, currentNode.current, POSITIONS.TOP, config.align);\n      }\n    }\n  });\n\n  return (\n    <div\n      aria-label={intl.formatMessage(intlMessages.aria)}\n      aria-live=\"polite\"\n      className=\"chat-wrapper\"\n      id={ID.CHAT}\n      onMouseEnter={() => interaction.current = true}\n      onMouseLeave={() => interaction.current = false}\n      tabIndex=\"0\"\n    >\n      <Messages\n        chat={chat}\n        currentDataIndex={currentDataIndex}\n        player={player}\n        setRef={(node, index) => setRef(node, index)}\n      />\n    </div>\n  );\n};\n\nChat.propTypes = propTypes;\nChat.defaultProps = defaultProps;\n\nconst areEqual = (prevProps, nextProps) => {\n  if (prevProps.currentDataIndex !== nextProps.currentDataIndex) return false;\n\n  if (!prevProps.player && nextProps.player) return false;\n\n  return true;\n};\n\nexport default React.memo(Chat, areEqual);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport { ID } from 'utils/constants';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  aria: {\n    id: 'player.notes.wrapper.aria',\n    description: 'Aria label for the notes wrapper',\n  },\n});\n\nconst propTypes = { notes: PropTypes.text };\n\nconst defaultProps = { notes: '' };\n\nconst Notes = ({ notes }) => {\n  const intl = useIntl();\n\n  return (\n    <div\n      aria-label={intl.formatMessage(intlMessages.aria)}\n      className=\"notes-wrapper\"\n      id={ID.NOTES}\n      tabIndex=\"0\"\n    >\n      <div className=\"notes\">\n        <div dangerouslySetInnerHTML={{ __html: notes }} />\n      </div>\n    </div>\n  );\n};\n\nNotes.propTypes = propTypes;\nNotes.defaultProps = defaultProps;\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Notes, areEqual);\n","import React from 'react';\nimport './index.scss';\n\nconst Cursor = ({\n  x,\n  y,\n}) => {\n\n  if (x === -1 || y === -1) return null;\n\n  return (\n    <circle\n      className=\"cursor\"\n      style={{ cx: x, cy: y }}\n    />\n  );\n};\n\nexport default Cursor;\n","import React from 'react';\nimport cx from 'classnames';\nimport { ID } from 'utils/constants';\nimport { buildFileURL } from 'utils/data';\nimport './index.scss';\n\nconst Proxy = ({\n  id,\n  height,\n  recordId,\n  thumbnails,\n  width,\n}) => {\n  const thumbnail = thumbnails.find(thumbnails => id === thumbnails.id);\n  if (!thumbnail) return null;\n\n  const {\n    alt,\n    src,\n  } = thumbnail;\n\n  if (src === ID.SCREENSHARE) return null;\n\n  const logo = src.includes('logo');\n\n  return (\n    <foreignObject\n      height={height}\n      x={0}\n      width={width}\n      y={0}\n    >\n      <img\n        alt={alt}\n        className={cx('proxy', { logo })}\n        src={buildFileURL(recordId, src)}\n      />\n    </foreignObject>\n  );\n};\n\nexport default Proxy;\n","import React from 'react';\nimport Proxy from './proxy';\nimport { buildFileURL } from 'utils/data';\n\nconst Slide = ({\n  id,\n  recordId,\n  slides,\n  thumbnails,\n}) => {\n  const current = slides.find(slide => id === slide.id);\n  if (!current) return null;\n\n  const {\n    height,\n    src,\n    width,\n  } = current;\n\n  return (\n    <g>\n      <Proxy\n        id={id}\n        height={height}\n        recordId={recordId}\n        thumbnails={thumbnails}\n        width={width}\n      />\n      <image\n        height={height}\n        href={buildFileURL(recordId, src)}\n        x={0}\n        width={width}\n        y={0}\n      />\n    </g>\n  );\n};\n\nconst areEqual = (prevProps, nextProps) => {\n  return prevProps.id === nextProps.id;\n};\n\nexport default React.memo(Slide, areEqual);\n","import React from 'react';\n\nconst Circle = ({\n  data,\n  style,\n}) => {\n\n  return (\n    <circle\n      style={style}\n      cx={data.cx}\n      cy={data.cy}\n      r={data.r}\n    />\n  );\n};\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Circle, areEqual);\n","import React from 'react';\n\nconst Line = ({\n  data,\n  style,\n}) => {\n\n  return (\n    <line\n      style={style}\n      x1={data.x1}\n      y1={data.y1}\n      x2={data.x2}\n      y2={data.y2}\n    />\n  );\n};\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Line, areEqual);\n","import React from 'react';\n\nconst Path = ({\n  data,\n  style,\n}) => {\n\n  return (\n    <path\n      style={style}\n      d={data.d}\n    />\n  );\n};\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Path, areEqual);\n","import React from 'react';\nimport { buildFileURL } from 'utils/data';\n\nconst Poll = ({\n  data,\n  recordId,\n  style,\n}) => {\n  const {\n    image,\n    rect,\n  } = data;\n\n  // TODO: Better adapt for old versions\n  if (rect) {\n    // BigBlueButton v2.2 or lower\n    return (\n      <g style={style}>\n        <rect\n          fill={rect.fill}\n          height={rect.height}\n          stroke={rect.stroke}\n          strokeWidth={rect['stroke-width']}\n          width={rect.width}\n          x={rect.x}\n          y={rect.y}\n        />\n        <image\n          height={image.height}\n          transform={image.transform}\n          width={image.width}\n          x={image.x}\n          href={buildFileURL(recordId, image['xlink:href'])}\n          y={image.y}\n        />\n      </g>\n    );\n  } else {\n    // BigBlueButton v2.3 or higher\n     return (\n      <g style={style}>\n        <image\n          height={image.height}\n          width={image.width}\n          x={image.x}\n          href={buildFileURL(recordId, image['xlink:href'])}\n          y={image.y}\n        />\n      </g>\n    );\n  }\n};\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Poll, areEqual);\n","import React from 'react';\n\nconst Polygon = ({\n  data,\n  style,\n}) => {\n\n  return (\n    <polygon\n      style={style}\n      points={data.points}\n    />\n  );\n};\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Polygon, areEqual);\n","import React from 'react';\n\nconst Polyline = ({\n  data,\n  style,\n}) => {\n\n  return (\n    <polyline\n      style={style}\n      points={data.points}\n    />\n  );\n};\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Polyline, areEqual);\n","import React from 'react';\n\nconst Text = ({\n  data,\n  style,\n}) => {\n\n  return (\n    <foreignObject\n      style={style}\n      height={data.height}\n      width={data.width}\n      x={data.x}\n      y={data.y}\n    >\n      <div xmlns=\"http://www.w3.org/1999/xhtml\">\n        {data.text.split('\\r').map(line => <span>{line}<br /></span>)}\n      </div>\n    </foreignObject>\n  );\n};\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Text, areEqual);\n","import React from 'react';\nimport Circle from './circle';\nimport Line from './line';\nimport Path from './path';\nimport Poll from './poll';\nimport Polygon from './polygon';\nimport Polyline from './polyline';\nimport Text from './text';\nimport { SHAPES } from 'utils/constants';\nimport { isEmpty } from 'utils/data/validators';\nimport logger from 'utils/logger';\n\nconst Canvas = ({\n  draws,\n  drawsInterval,\n  recordId,\n}) => {\n  if (isEmpty(drawsInterval)) return null;\n\n  const canvas = [];\n\n  for (let i = 0; i < drawsInterval.length; i++) {\n    if (!drawsInterval[i]) continue;\n\n    const {\n      id,\n      shape,\n      style,\n    } = draws[i];\n\n    const j = i + 1;\n    let intermediate = false;\n    if (j < drawsInterval.length) {\n      intermediate = draws[j].id === id;\n    }\n\n    if (intermediate) continue;\n\n    const {\n      data,\n      type,\n    } = shape;\n\n    switch (type) {\n      case SHAPES.CIRCLE:\n        canvas.push(\n          <Circle\n            data={data}\n            key={id}\n            style={style}\n          />\n        );\n        break;\n      case SHAPES.LINE:\n        canvas.push(\n          <Line\n            data={data}\n            key={id}\n            style={style}\n          />\n        );\n        break;\n      case SHAPES.PATH:\n        canvas.push(\n          <Path\n            data={data}\n            key={id}\n            style={style}\n          />\n        );\n        break;\n      case SHAPES.POLL:\n        canvas.push(\n          <Poll\n            data={data}\n            key={id}\n            recordId={recordId}\n            style={style}\n          />\n        );\n        break;\n      case SHAPES.POLYGON:\n        canvas.push(\n          <Polygon\n            data={data}\n            key={id}\n            style={style}\n          />\n        );\n        break;\n      case SHAPES.POLYLINE:\n        canvas.push(\n          <Polyline\n            data={data}\n            key={id}\n            style={style}\n          />\n        );\n        break;\n      case SHAPES.TEXT:\n        canvas.push(\n          <Text\n            data={data}\n            key={id}\n            style={style}\n          />\n        );\n        break;\n      default:\n        logger.debug('unhandled', type);\n    }\n  }\n\n  return (\n    <g>\n      {canvas}\n    </g>\n  );\n};\n\nexport default Canvas;\n","import React from 'react';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport cx from 'classnames';\nimport Cursor from './cursor';\nimport Slide from './slide';\nimport Canvas from './canvas';\nimport { ID } from 'utils/constants';\nimport { isEqual } from 'utils/data/validators';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  aria: {\n    id: 'player.presentation.wrapper.aria',\n    description: 'Aria label for the presentation wrapper',\n  },\n});\n\nconst buildViewBoxAttr = (viewBox) => {\n  const {\n    height,\n    x,\n    width,\n    y,\n  } = viewBox;\n\n  return `${x} ${y} ${width} ${height}`;\n};\n\nconst getCursor = (cursors, index, viewBox) => {\n  const inactive = {\n    x: -1,\n    y: -1,\n  }\n\n  if (index === -1) return inactive;\n\n  const currentData = cursors[index];\n  if (currentData.x === -1 && currentData.y === -1) return inactive;\n\n  return {\n    x: viewBox.x + (currentData.x * viewBox.width),\n    y: viewBox.y + (currentData.y * viewBox.height),\n  };\n};\n\nconst getSlideId = (index, slides) => {\n  const inactive = -1;\n  if (index === -1) return inactive;\n\n  const currentData = slides[index];\n\n  return currentData.id;\n};\n\nconst getViewBox = (index, panzooms) => {\n  const inactive = {\n    height: 0,\n    x: 0,\n    width: 0,\n    y: 0,\n  };\n\n  if (index === -1) return inactive;\n\n  const currentData = panzooms[index];\n\n  return {\n    height: currentData.height,\n    x: currentData.x,\n    width: currentData.width,\n    y: currentData.y,\n  };\n};\n\nconst Presentation = ({\n  active,\n  currentCursorIndex,\n  currentPanzoomIndex,\n  currentSlideIndex,\n  cursors,\n  draws,\n  drawsInterval,\n  panzooms,\n  recordId,\n  slides,\n  thumbnails,\n}) => {\n  const intl = useIntl();\n  const slideId = getSlideId(currentSlideIndex, slides);\n  const viewBox = getViewBox(currentPanzoomIndex, panzooms);\n  const cursor = getCursor(cursors, currentCursorIndex, viewBox);\n\n  return (\n    <div\n      aria-label={intl.formatMessage(intlMessages.aria)}\n      className={cx('presentation-wrapper', { inactive: !active })}\n      id={ID.PRESENTATION}\n    >\n      <div className=\"presentation\">\n        <svg\n          viewBox={buildViewBoxAttr(viewBox)}\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <defs>\n            <clipPath id=\"viewBox\">\n              <rect\n                height={viewBox.height}\n                x={viewBox.x}\n                width={viewBox.width}\n                y={viewBox.y}\n              />\n            </clipPath>\n          </defs>\n          <g clipPath=\"url(#viewBox)\">\n            <Slide\n              id={slideId}\n              recordId={recordId}\n              slides={slides}\n              thumbnails={thumbnails}\n            />\n            <Canvas\n              draws={draws}\n              drawsInterval={drawsInterval}\n              recordId={recordId}\n            />\n            <Cursor\n              x={cursor.x}\n              y={cursor.y}\n            />\n          </g>\n        </svg>\n      </div>\n    </div>\n  );\n};\n\nconst areEqual = (prevProps, nextProps) => {\n  if (prevProps.active !== nextProps.active) return false;\n\n  if (prevProps.currentCursorIndex !== nextProps.currentCursorIndex) return false;\n\n  if (prevProps.currentPanzoomIndex !== nextProps.currentPanzoomIndex) return false;\n\n  if (!isEqual(prevProps.draws, nextProps.draws)) return false;\n\n  if (!isEqual(prevProps.drawsInterval, nextProps.drawsInterval)) return false;\n\n  return true;\n};\n\nexport default React.memo(Presentation, areEqual);\n","import React, { useEffect, useRef } from 'react';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport cx from 'classnames';\nimport videojs from 'video.js/core.es.js';\nimport { ID } from 'utils/constants';\nimport { buildFileURL } from 'utils/data';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  aria: {\n    id: 'player.screenshare.wrapper.aria',\n    description: 'Aria label for the screenshare wrapper',\n  },\n});\n\nconst buildSources = (media, recordId) => {\n  return [\n    {\n      src: buildFileURL(recordId, 'deskshare/deskshare.mp4'),\n      type: 'video/mp4',\n    }, {\n      src: buildFileURL(recordId, 'deskshare/deskshare.webm'),\n      type: 'video/webm',\n    },\n  ].filter(source => media.find(m => source.type.includes(m)));\n};\n\nconst buildOptions = (sources) => {\n  return {\n    controls: false,\n    fill: true,\n    sources: sources.current,\n  };\n};\n\nconst Screenshare = ({\n  active,\n  media,\n  onPlayerReady,\n  recordId,\n}) => {\n  const intl = useIntl();\n  const sources = useRef(buildSources(media, recordId));\n  const player = useRef();\n  const element = useRef();\n\n  useEffect(() => {\n    if (!player.current) {\n      player.current = videojs(element.current, buildOptions(sources), () => {\n        if (onPlayerReady) onPlayerReady(ID.SCREENSHARE, player.current);\n      });\n    }\n\n    return () => {\n      if (player.current) {\n        player.current.dispose();\n      }\n    };\n  }, [ onPlayerReady ]);\n\n  return (\n    <div\n      aria-label={intl.formatMessage(intlMessages.aria)}\n      className={cx('screenshare-wrapper', { inactive: !active })}\n      id={ID.SCREENSHARE}\n    >\n      <div data-vjs-player>\n        <video\n          className=\"video-js\"\n          playsInline\n          preload=\"auto\"\n          ref={node => element.current = node}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst areEqual = (prevProps, nextProps) => {\n  return prevProps.active === nextProps.active;\n};\n\nexport default React.memo(Screenshare, areEqual);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { ID } from 'utils/constants';\nimport { buildFileURL } from 'utils/data';\nimport './index.scss';\n\nconst propTypes = {\n  alt: PropTypes.string,\n  src: PropTypes.string,\n  recordId: PropTypes.string,\n};\n\nconst defaultProps = {\n  alt: '',\n  src: '',\n  recordId: '',\n};\n\nconst Image = ({\n  alt,\n  src,\n  recordId,\n}) => {\n  const screenshare = src === ID.SCREENSHARE;\n\n  if (screenshare) {\n    return (\n      <div className={cx('thumbnail-image', { screenshare })}>\n        <span className=\"icon-screenshare\" />\n      </div>\n    );\n  }\n\n  const logo = src.includes('logo');\n\n  return (\n    <img\n      alt={alt}\n      className={cx('thumbnail-image', { logo })}\n      src={buildFileURL(recordId, src)}\n    />\n  );\n};\n\nImage.propTypes = propTypes;\nImage.defaultProps = defaultProps;\n\nexport default Image;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Image from './image';\nimport './index.scss';\n\nconst propTypes = {\n  alt: PropTypes.string,\n  index: PropTypes.number,\n  recordId: PropTypes.string,\n  src: PropTypes.string,\n};\n\nconst defaultProps = {\n  alt: '',\n  index: 0,\n  recordId: '',\n  src: '',\n};\n\nconst Thumbnail = ({\n  alt,\n  index,\n  recordId,\n  src,\n}) => {\n\n  return (\n    <div className=\"thumbnail\">\n      <Image\n        alt={alt}\n        recordId={recordId}\n        src={src}\n      />\n      <div className=\"thumbnail-index\">\n        {index + 1}\n      </div>\n    </div>\n  )\n};\n\nThumbnail.propTypes = propTypes;\nThumbnail.defaultProps = defaultProps;\n\nexport default Thumbnail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Thumbnail from './thumbnail';\nimport { handleOnEnterPress } from 'utils/data/handlers';\nimport './index.scss';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  index: PropTypes.number,\n  interactive: PropTypes.bool,\n  item: PropTypes.object,\n  player: PropTypes.object,\n  recordId: PropTypes.string,\n  setRef: PropTypes.func,\n};\n\nconst defaultProps = {\n  active: false,\n  index: 0,\n  interactive: false,\n  item: {},\n  player: {},\n  recordId: '',\n  setRef: () => {},\n};\n\nconst Item = ({\n  active,\n  index,\n  interactive,\n  item,\n  player,\n  recordId,\n  setRef,\n}) => {\n  if (!interactive) {\n\n    return (\n      <div\n        className=\"thumbnail-wrapper\"\n        tabIndex=\"0\"\n      >\n        <Thumbnail\n          alt={item.alt}\n          index={index}\n          recordId={recordId}\n          src={item.src}\n        />\n      </div>\n    );\n  }\n\n  const handleOnClick = () => {\n    if (player) player.currentTime(item.timestamp);\n  };\n\n  return (\n    <div\n      className={cx('thumbnail-wrapper', { active, interactive })}\n      onClick={() => handleOnClick()}\n      onKeyPress={event => handleOnEnterPress(event, handleOnClick)}\n      ref={node => setRef(node, index)}\n      tabIndex=\"0\"\n    >\n      <Thumbnail\n        alt={item.alt}\n        index={index}\n        recordId={recordId}\n        src={item.src}\n      />\n    </div>\n  );\n};\n\nItem.propTypes = propTypes;\nItem.defaultProps = defaultProps;\n\nexport default Item;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport './index.scss';\n\nconst DEFAULT = 'default';\nconst GHOST = 'ghost';\nconst SOLID = 'solid';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  aria: PropTypes.string,\n  circle: PropTypes.bool,\n  disabled: PropTypes.bool,\n  handleOnClick: PropTypes.func,\n  icon: PropTypes.string,\n  type: PropTypes.string,\n};\n\nconst defaultProps = {\n  active: false,\n  aria: '',\n  circle: false,\n  disabled: false,\n  handleOnClick: () => {},\n  icon: '',\n  type: DEFAULT,\n};\n\nconst Button = ({\n  active,\n  aria,\n  circle,\n  disabled,\n  handleOnClick,\n  icon,\n  type,\n}) => {\n  const ghost = type === GHOST;\n  const solid = type === SOLID;\n\n  const style = {\n    default: !ghost && !solid && !disabled,\n    ghost: ghost && !active && !disabled,\n    solid: (solid || active) && !disabled,\n    circle,\n    disabled,\n  };\n\n  return (\n    <div className=\"button-wrapper\">\n      <button\n        aria-label={aria}\n        className={cx('button', style)}\n        disabled={disabled}\n        onClick={() => handleOnClick()}\n      >\n        <span className={`icon-${icon}`} />\n      </button>\n    </div>\n  );\n};\n\nButton.propTypes = propTypes;\nButton.defaultProps = defaultProps;\n\nexport default Button;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport Button from 'components/utils/button';\nimport { isEmpty } from 'utils/data/validators';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  clear: {\n    id: 'button.clear.aria',\n    description: 'Aria label for the clear button',\n  },\n});\n\nconst propTypes = {\n  interactive: PropTypes.bool,\n  handleSearch: PropTypes.func,\n  search: PropTypes.array,\n};\n\nconst defaultProps = {\n  interactive: false,\n  handleSearch: () => {},\n  search: [],\n};\n\nconst Clear = ({\n  interactive,\n  handleSearch,\n  search,\n}) => {\n  const intl = useIntl();\n\n  if (!interactive) return null;\n\n  if (isEmpty(search)) return null;\n\n  return (\n    <div className=\"clear-button\">\n      <Button\n        aria={intl.formatMessage(intlMessages.clear)}\n        handleOnClick={() => handleSearch([])}\n        icon=\"close\"\n        type=\"solid\"\n      />\n    </div>\n  );\n};\n\nClear.propTypes = propTypes;\nClear.defaultProps = defaultProps;\n\nexport default Clear;\n","import React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport Item from './item';\nimport ClearButton from './buttons/clear';\nimport { thumbnails as config } from 'config';\nimport {\n  ID,\n  POSITIONS,\n} from 'utils/constants';\nimport { handleAutoScroll } from 'utils/data/handlers';\nimport {\n  isEmpty,\n  isEqual,\n} from 'utils/data/validators';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  aria: {\n    id: 'player.thumbnails.wrapper.aria',\n    description: 'Aria label for the thumbnails wrapper',\n  },\n});\n\nconst propTypes = {\n  currentDataIndex: PropTypes.number,\n  handleSearch: PropTypes.func,\n  interactive: PropTypes.bool,\n  player: PropTypes.object,\n  recordId: PropTypes.string,\n  search: PropTypes.array,\n  thumbnails: PropTypes.array,\n};\n\nconst defaultProps = {\n  currentDataIndex: 0,\n  handleSearch: () => {},\n  interactive: false,\n  player: {},\n  recordId: '',\n  search: [],\n  thumbnails: [],\n};\n\nconst Thumbnails = ({\n  currentDataIndex,\n  handleSearch,\n  interactive,\n  player,\n  recordId,\n  search,\n  thumbnails,\n}) => {\n  const interaction = useRef(false);\n  const firstNode = useRef();\n  const currentNode = useRef();\n\n  const intl = useIntl();\n\n  const setRef = (node, index) => {\n    if (index === 0) {\n      firstNode.current = node;\n    }\n\n    if (index === currentDataIndex) {\n      currentNode.current = node;\n    }\n  };\n\n  const isFiltered = (index) => {\n    if (interactive) {\n      return !isEmpty(search) && !search.includes(index);\n    } else {\n      return !search.includes(index);\n    }\n  }\n\n  useEffect(() => {\n    if (!interaction.current) {\n      if (config.scroll) {\n        handleAutoScroll(firstNode.current, currentNode.current, POSITIONS.LEFT, config.align);\n      }\n    }\n  });\n\n  return (\n    <div\n      aria-label={intl.formatMessage(intlMessages.aria)}\n      className=\"thumbnails-wrapper\"\n      id={ID.THUMBNAILS}\n      onMouseEnter={() => interaction.current = true}\n      onMouseLeave={() => interaction.current = false}\n      tabIndex=\"0\"\n    >\n      {thumbnails.reduce((result, item, index) => {\n        if (!isFiltered(index)) {\n          const active = index === currentDataIndex;\n\n          result.push(\n            <Item\n              active={active}\n              index={index}\n              interactive={interactive}\n              item={item}\n              player={player}\n              recordId={recordId}\n              setRef={setRef}\n            />\n          );\n        }\n\n        return result;\n      }, [])}\n      <ClearButton\n        interactive={interactive}\n        handleSearch={handleSearch}\n        search={search}\n      />\n    </div>\n  );\n};\n\nThumbnails.propTypes = propTypes;\nThumbnails.defaultProps = defaultProps;\n\nconst areEqual = (prevProps, nextProps) => {\n  if (prevProps.currentDataIndex !== nextProps.currentDataIndex) return false;\n\n  if (!isEqual(prevProps.search, nextProps.search)) return false;\n\n  if (!prevProps.player && nextProps.player) return false;\n\n  return true;\n};\n\nexport default React.memo(Thumbnails, areEqual);\n","import React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport videojs from 'video.js/core.es.js';\nimport { video as config } from 'config';\nimport { ID } from 'utils/constants';\nimport { buildFileURL } from 'utils/data';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  aria: {\n    id: 'player.video.wrapper.aria',\n    description: 'Aria label for the video wrapper',\n  },\n});\n\nconst buildSources = (media, recordId) => {\n  return [\n    {\n      src: buildFileURL(recordId, 'video/webcams.mp4'),\n      type: 'video/mp4',\n    }, {\n      src: buildFileURL(recordId, 'video/webcams.webm'),\n      type: 'video/webm',\n    },\n  ].filter(source => media.find(m => source.type.includes(m)));\n};\n\nconst buildTracks = (captions, recordId) => {\n  return captions.map(lang => {\n    const {\n      locale,\n      localeName,\n    } = lang;\n\n    return {\n      kind: 'captions',\n      src: buildFileURL(recordId, `caption_${locale}.vtt`),\n      srclang: locale,\n      label: localeName,\n    };\n  });\n};\n\nconst buildOptions = (sources, tracks) => {\n  return {\n    controlBar: {\n      fullscreenToggle: false,\n      pictureInPictureToggle: false,\n      volumePanel: {\n        inline: false,\n        vertical: true,\n      },\n    },\n    controls: true,\n    fill: true,\n    inactivityTimeout: 0,\n    playbackRates: config.rates,\n    sources: sources.current,\n    tracks: tracks.current,\n  };\n};\n\nconst propTypes = {\n  captions: PropTypes.array,\n  media: PropTypes.array,\n  onPlayerReady: PropTypes.func,\n  onTimeUpdate: PropTypes.func,\n  recordId: PropTypes.string,\n  time: PropTypes.number,\n};\n\nconst defaultProps = {\n  captions: [],\n  media: [],\n  onPlayerReady: () => {},\n  onTimeUpdate: () => {},\n  recordId: '',\n  time: 0,\n};\n\nconst Video = ({\n  captions,\n  media,\n  onPlayerReady,\n  onTimeUpdate,\n  recordId,\n  time,\n}) => {\n  const intl = useIntl();\n  const sources = useRef(buildSources(media, recordId));\n  const tracks = useRef(buildTracks(captions, recordId));\n  const player = useRef();\n  const element = useRef();\n\n  useEffect(() => {\n    if (!player.current) {\n      player.current = videojs(element.current, buildOptions(sources, tracks), () => {\n        // Set clock tick\n        if (onTimeUpdate) {\n          player.current.on('play', () => {\n            setInterval(() => {\n              const currentTime = player.current.currentTime();\n              onTimeUpdate(currentTime);\n            }, 1000 / config.rps);\n          });\n\n          player.current.on('pause', () => clearInterval());\n        }\n\n        // Set starting point\n        if (time) {\n          player.current.on('loadedmetadata', () => {\n            const duration = player.current.duration();\n            if (time < duration) {\n              player.current.currentTime(time);\n            }\n          });\n        }\n\n        // Set ready\n        if (onPlayerReady) onPlayerReady(ID.VIDEO, player.current);\n      });\n    }\n\n    return () => {\n      if (player.current) {\n        player.current.dispose();\n      }\n    };\n  }, [ onTimeUpdate, time, onPlayerReady ]);\n\n  return (\n    <div\n      aria-label={intl.formatMessage(intlMessages.aria)}\n      className=\"video-wrapper\"\n      id={ID.VIDEO}\n    >\n      <div data-vjs-player>\n        <video\n          className=\"video-js\"\n          playsInline\n          preload=\"auto\"\n          ref={node => element.current = node}\n        />\n      </div>\n    </div>\n  );\n};\n\nVideo.propTypes = propTypes;\nVideo.defaultProps = defaultProps;\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Video, areEqual);\n","import React from 'react';\nimport './index.scss';\n\nconst Bottom = () => {\n  return <div className=\"bottom-bar\" />;\n};\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Bottom, areEqual);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n  FormattedDate,\n} from 'react-intl';\nimport cx from 'classnames';\nimport { handleOnEnterPress } from 'utils/data/handlers';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  about: {\n    id: 'button.about.aria',\n    description: 'Aria label for the about button',\n  },\n});\n\nconst propTypes = {\n  interactive: PropTypes.bool,\n  name: PropTypes.string,\n  start: PropTypes.number,\n  toggleAbout: PropTypes.func,\n};\n\nconst defaultProps = {\n  interactive: false,\n  name: '',\n  start: 0,\n  toggleAbout: () => {},\n};\n\nconst Title = ({\n  interactive,\n  name,\n  start,\n  toggleAbout,\n}) => {\n  const intl = useIntl();\n  const date = <FormattedDate value={new Date(start)} />;\n\n  if (!interactive) {\n\n    return (\n      <span className=\"title\">\n        {name} - {date}\n      </span>\n    );\n  }\n\n  return (\n    <span\n      aria={intl.formatMessage(intlMessages.about)}\n      className={cx('title', { interactive })}\n      onClick={toggleAbout}\n      onKeyPress={event => handleOnEnterPress(event, toggleAbout)}\n      tabIndex=\"0\"\n    >\n      {name} - {date}\n    </span>\n  );\n};\n\nTitle.propTypes = propTypes;\nTitle.defaultProps = defaultProps;\n\nexport default Title;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport Button from 'components/utils/button';\nimport { ID } from 'utils/constants';\n\nconst intlMessages = defineMessages({\n  search: {\n    id: 'button.search.aria',\n    description: 'Aria label for the search button',\n  },\n});\n\nconst propTypes = {\n  enabled: PropTypes.bool,\n  toggleSearch: PropTypes.func,\n};\n\nconst defaultProps = {\n  enabled: false,\n  toggleSearch: () => {},\n};\n\nconst Search = ({\n  enabled,\n  toggleSearch,\n}) => {\n  const intl = useIntl();\n\n  if (!enabled) return null;\n\n  return (\n    <Button\n      aria={intl.formatMessage(intlMessages.search)}\n      circle\n      handleOnClick={toggleSearch}\n      icon={ID.SEARCH}\n    />\n  );\n};\n\nSearch.propTypes = propTypes;\nSearch.defaultProps = defaultProps;\n\nexport default Search;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport Button from 'components/utils/button';\n\nconst intlMessages = defineMessages({\n  section: {\n    id: 'button.section.aria',\n    description: 'Aria label for the section button',\n  },\n});\n\nconst propTypes = {\n  enabled: PropTypes.bool,\n  section: PropTypes.bool,\n  toggleSection: PropTypes.func,\n};\n\nconst defaultProps = {\n  enabled: false,\n  section: true,\n  toggleSection: () => {},\n};\n\nconst Section = ({\n  enabled,\n  section,\n  toggleSection,\n}) => {\n  const intl = useIntl();\n\n  if (!enabled) return null;\n\n  return (\n    <Button\n      aria={intl.formatMessage(intlMessages.section)}\n      circle\n      handleOnClick={toggleSection}\n      icon={section ? 'arrowLeft' : 'arrowRight'}\n    />\n  );\n};\n\nSection.propTypes = propTypes;\nSection.defaultProps = defaultProps;\n\nexport default Section;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport Button from 'components/utils/button';\nimport { ID } from 'utils/constants';\n\nconst intlMessages = defineMessages({\n  swap: {\n    id: 'button.swap.aria',\n    description: 'Aria label for the swap button',\n  },\n});\n\nconst propTypes = {\n  enabled: PropTypes.bool,\n  toggleSwap: PropTypes.func,\n};\n\nconst defaultProps = {\n  enabled: false,\n  toggleSwap: () => {},\n};\n\nconst Swap = ({\n  enabled,\n  toggleSwap,\n}) => {\n  const intl = useIntl();\n\n  if (!enabled) return null;\n\n  return (\n    <Button\n      aria={intl.formatMessage(intlMessages.swap)}\n      circle\n      handleOnClick={toggleSwap}\n      icon={ID.SWAP}\n    />\n  );\n};\n\nSwap.propTypes = propTypes;\nSwap.defaultProps = defaultProps;\n\nexport default Swap;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Title from './title';\nimport SearchButton from './buttons/search';\nimport SectionButton from './buttons/section';\nimport SwapButton from './buttons/swap';\nimport { controls as config } from 'config';\nimport './index.scss';\n\nconst propTypes = {\n  control: PropTypes.bool,\n  name: PropTypes.string,\n  section: PropTypes.bool,\n  single: PropTypes.bool,\n  start: PropTypes.number,\n  toggleAbout: PropTypes.func,\n  toggleSearch: PropTypes.func,\n  toggleSection: PropTypes.func,\n  toggleSwap: PropTypes.func,\n};\n\nconst defaultProps = {\n  control: false,\n  name: '',\n  section: false,\n  single: false,\n  start: 0,\n  toggleAbout: () => {},\n  toggleSearch: () => {},\n  toggleSection: () => {},\n  toggleSwap: () => {},\n};\n\nconst Top = ({\n  control,\n  name,\n  section,\n  single,\n  start,\n  toggleAbout,\n  toggleSearch,\n  toggleSection,\n  toggleSwap,\n}) => {\n\n  return (\n    <div className=\"top-bar\">\n      <div className=\"left\">\n        <SectionButton\n          enabled={control && config.section}\n          section={section}\n          toggleSection={toggleSection}\n        />\n      </div>\n      <div className=\"center\">\n        <Title\n          interactive={control && config.about}\n          name={name}\n          start={start}\n          toggleAbout={toggleAbout}\n        />\n      </div>\n      <div className=\"right\">\n        <SearchButton\n          enabled={control && config.search && !single}\n          toggleSearch={toggleSearch}\n        />\n        <SwapButton\n          enabled={control && config.swap && !single}\n          toggleSwap={toggleSwap}\n        />\n      </div>\n    </div>\n  );\n};\n\nTop.propTypes = propTypes;\nTop.defaultProps = defaultProps;\n\n// Checks the side section state\nconst areEqual = (prevProps, nextProps) => {\n  return prevProps.section === nextProps.section;\n};\n\nexport default React.memo(Top, areEqual);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport './index.scss';\n\nconst propTypes = {\n  icon: PropTypes.string,\n  value: PropTypes.oneOfType([\n    PropTypes.bool,\n    PropTypes.string,\n  ]),\n};\n\nconst defaultProps = {\n  icon: '',\n  value: false,\n};\n\nconst Item = ({\n  icon,\n  value,\n}) => {\n  let element;\n  if (typeof value === 'boolean') {\n    const icon = value ? 'icon-check' : 'icon-close';\n\n    const style = {\n      green: value,\n      red: !value,\n    };\n\n    element = <div className={cx(icon, style)} />;\n  } else {\n    element = value;\n  }\n\n  return (\n    <div className=\"item\">\n      <div className={`icon-${icon}`} />\n      <div className=\"value\">\n        {element}\n      </div>\n    </div>\n  );\n};\n\nItem.propTypes = propTypes;\nItem.defaultProps = defaultProps;\n\nexport default Item;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Item from './item';\nimport { ID } from 'utils/constants';\nimport './index.scss';\n\nconst CONTENT = [\n  ID.USERS,\n  ID.PRESENTATION,\n  ID.CHAT,\n  ID.POLLS,\n  ID.EXTERNAL_VIDEOS,\n  ID.NOTES,\n  ID.SCREENSHARE,\n  ID.CAPTIONS,\n];\n\nconst propTypes = {\n  content: PropTypes.object,\n  users: PropTypes.number,\n};\n\nconst defaultProps = {\n  content: {},\n  users: 0,\n};\n\nconst Body = ({\n  content,\n  users,\n}) => {\n  const data = {\n    ...content,\n    users,\n  };\n\n  return (\n    <div className=\"about-body\">\n      {CONTENT.map((item) => (\n        <Item\n          icon={item}\n          key={item}\n          value={data[item]}\n        />\n      ))}\n    </div>\n  );\n};\n\nBody.propTypes = propTypes;\nBody.defaultProps = defaultProps;\n\nexport default Body;\n","import React from 'react';\nimport Item from './item';\nimport {\n  BUILD,\n  ID,\n} from 'utils/constants';\nimport './index.scss';\n\nconst Footer = () => {\n  return (\n    <div className=\"about-footer\">\n      {BUILD ? (\n        <Item\n          icon={ID.SETTINGS}\n          value={BUILD}\n        />\n      ) : (\n        null\n      )}\n    </div>\n  );\n};\n\nexport default Footer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  FormattedDate,\n  FormattedTime,\n} from 'react-intl';\nimport './index.scss';\n\nconst propTypes = { metadata: PropTypes.object };\n\nconst defaultProps = { metadata: {} };\n\nconst Header = ({ metadata }) => {\n  const {\n    end,\n    name,\n    start,\n  } = metadata;\n\n  const subtitle = [];\n  subtitle.push(\n    <FormattedDate\n      value={new Date(start)}\n      day=\"numeric\"\n      month=\"long\"\n      year=\"numeric\"\n    />\n  );\n\n  subtitle.push(<FormattedTime value={new Date(start)} />);\n  subtitle.push(<FormattedTime value={new Date(end)} />);\n\n  return (\n    <div className=\"about-header\">\n      <div className=\"title\">\n        {name}\n      </div>\n      <div className=\"subtitle\">\n        {subtitle.map(s => <div className=\"item\">{s}</div>)}\n      </div>\n    </div>\n  );\n};\n\nHeader.propTypes = propTypes;\nHeader.defaultProps = defaultProps;\n\nexport default Header;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport Button from 'components/utils/button';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  close: {\n    id: 'button.close.aria',\n    description: 'Aria label for the close button',\n  },\n});\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]),\n  onClose: PropTypes.func,\n};\n\nconst defaultProps = {\n  children: null,\n  onClose: () => {},\n};\n\nconst Modal = ({\n  children,\n  onClose,\n}) => {\n  const intl = useIntl();\n\n  return (\n    <div className=\"modal-wrapper\">\n      <div className=\"modal\">\n        <div className=\"modal-control\">\n          <Button\n            aria={intl.formatMessage(intlMessages.close)}\n            circle\n            handleOnClick={onClose}\n            icon=\"close\"\n          />\n        </div>\n        <div className=\"modal-content\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nModal.propTypes = propTypes;\nModal.defaultProps = defaultProps;\n\nexport default Modal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Body from './body';\nimport Footer from './footer';\nimport Header from './header';\nimport Modal from 'components/utils/modal';\nimport './index.scss';\n\nconst propTypes = {\n  content: PropTypes.object,\n  metadata: PropTypes.object,\n  toggleModal: PropTypes.func,\n};\n\nconst defaultProps = {\n  content: {},\n  metadata: {},\n  toggleModal: () => {},\n};\n\nconst About = ({\n  content,\n  metadata,\n  toggleModal,\n}) => {\n\n  return (\n    <Modal onClose={toggleModal}>\n      <Header metadata={metadata} />\n      <Body\n        content={content}\n        users={metadata.participants}\n      />\n      <Footer />\n    </Modal>\n  );\n};\n\nAbout.propTypes = propTypes;\nAbout.defaultProps = defaultProps;\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(About, areEqual);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Thumbnails from 'components/thumbnails';\nimport { search as config } from 'config';\nimport './index.scss';\n\nconst propTypes = {\n  handleOnChange: PropTypes.func,\n  metadata: PropTypes.object,\n  search: PropTypes.array,\n  thumbnails: PropTypes.array,\n};\n\nconst defaultProps = {\n  handleOnChange: () => {},\n  metadata: {},\n  search: [],\n  thumbnails: [],\n};\n\nconst Body = ({\n  handleOnChange,\n  metadata,\n  search,\n  thumbnails,\n}) => {\n\n  return (\n    <div className=\"search-body\">\n      <input\n        maxLength={config.length.max}\n        minLength={config.length.min}\n        onChange={(event) => handleOnChange(event)}\n        type=\"text\"\n      />\n      <div className={cx('result', { active: true })}>\n        <Thumbnails\n          currentDataIndex={0}\n          handleSearch={null}\n          interactive={false}\n          player={null}\n          recordId={metadata.id}\n          search={search}\n          thumbnails={thumbnails}\n        />\n      </div>\n    </div>\n  );\n};\n\nBody.propTypes = propTypes;\nBody.defaultProps = defaultProps;\n\nexport default Body;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport Button from 'components/utils/button';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  search: {\n    id: 'button.search.aria',\n    description: 'Aria label for the search button',\n  },\n});\n\nconst propTypes = {\n  disabled: PropTypes.bool,\n  handleOnClick: PropTypes.func,\n};\n\nconst defaultProps = {\n  disabled: false,\n  handleOnClick: () => {},\n};\n\nconst Footer = ({\n  disabled,\n  handleOnClick,\n}) => {\n  const intl = useIntl();\n\n  return (\n    <div className=\"search-footer\">\n      <Button\n        aria={intl.formatMessage(intlMessages.search)}\n        disabled={disabled}\n        handleOnClick={(event) => handleOnClick(event)}\n        icon=\"search\"\n        type=\"solid\"\n      />\n    </div>\n  );\n};\n\nFooter.propTypes = propTypes;\nFooter.defaultProps = defaultProps;\n\nexport default Footer;\n","import React from 'react';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  title: {\n    id: 'player.search.modal.title',\n    description: 'Label for the search modal title',\n  },\n  subtitle: {\n    id: 'player.search.modal.subtitle',\n    description: 'Label for the search modal subtitle',\n  },\n});\n\nconst Header = () => {\n  const intl = useIntl();\n\n  return (\n    <div className=\"search-header\">\n      <div className=\"title\">\n        {intl.formatMessage(intlMessages.title)}\n      </div>\n      <div className=\"subtitle\">\n        {intl.formatMessage(intlMessages.subtitle)}\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import { getCurrentDataIndex } from './data';\nimport { hasVideo } from './data/validators';\n\nconst search = (text, thumbnails) => {\n  const result = [];\n\n  const value = text.toLowerCase();\n  thumbnails.forEach((thumbnail, index) => {\n    const { alt } = thumbnail;\n\n    if (alt.toLowerCase().indexOf(value) !== -1) {\n      result.push(index);\n    }\n  });\n\n  return result;\n};\n\nconst seek = (player, seconds) => {\n  if (!hasVideo(player)) return null;\n\n  const min = 0;\n  const max = player.video.duration();\n  const time = player.video.currentTime() + seconds;\n\n  if (time < min) {\n    player.video.currentTime(min);\n  } else if (time > max) {\n    player.video.currentTime(max);\n  } else {\n    player.video.currentTime(time);\n  }\n};\n\nconst skip = (player, data, change) => {\n  if (!hasVideo(player)) return null;\n\n  const min = 0;\n  const max = data.length - 1;\n  const time = player.video.currentTime();\n\n  const current = getCurrentDataIndex(data, time);\n  if (current === -1) return null;\n\n  const index = current + change;\n\n  let timestamp;\n  if (index < min) {\n    timestamp = data[min].timestamp;\n  } else if (index > max) {\n    timestamp = data[max].timestamp;\n  } else {\n    timestamp = data[index].timestamp;\n  }\n\n  if (typeof timestamp !== 'undefined') {\n    player.video.currentTime(timestamp);\n  }\n};\n\nexport {\n  search,\n  seek,\n  skip,\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Body from './body';\nimport Footer from './footer';\nimport Header from './header';\nimport { search as config } from 'config';\nimport Modal from 'components/utils/modal';\nimport { search as getSearch } from 'utils/actions';\nimport {\n  isEmpty,\n  isEqual,\n} from 'utils/data/validators';\nimport './index.scss';\n\nconst getValue = (event) => {\n  if (event && event.target) return event.target.value;\n\n  return null;\n};\n\nconst isValid = (value) => {\n  if (value && typeof value === 'string') {\n    return value.length >= config.length.min;\n  }\n\n  return false;\n};\n\nconst propTypes = {\n  handleSearch: PropTypes.func,\n  metadata: PropTypes.object,\n  thumbnails: PropTypes.array,\n  toggleModal: PropTypes.func,\n};\n\nconst defaultProps = {\n  handleSearch: () => {},\n  metadata: {},\n  thumbnails: [],\n  toggleModal: () => {},\n};\n\nconst Search = ({\n  handleSearch,\n  metadata,\n  thumbnails,\n  toggleModal,\n}) => {\n  const [disabled, setDisabled] = useState(true);\n  const [search, setSearch] = useState([]);\n\n  const handleOnChange = (event) => {\n    const value = getValue(event);\n    if (isValid(value)) {\n      const result = getSearch(value, thumbnails);\n\n      // If different, update search\n      if (!isEqual(search, result)) {\n        setSearch(result);\n      }\n\n      // Check to enable\n      if (disabled) setDisabled(false);\n    } else {\n      // If not empty, clear search\n      if (!isEmpty(search)) {\n        setSearch([]);\n      }\n\n      // Chack to disable\n      if (!disabled) setDisabled(true);\n    }\n  };\n\n  const handleOnClick = () => {\n    handleSearch(search);\n    toggleModal();\n  };\n\n  return (\n    <Modal onClose={toggleModal}>\n      <Header />\n      <Body\n        handleOnChange={(event) => handleOnChange(event)}\n        metadata={metadata}\n        search={search}\n        thumbnails={thumbnails}\n      />\n      <Footer\n        disabled={disabled}\n        handleOnClick={() => handleOnClick()}\n      />\n    </Modal>\n  );\n};\n\nSearch.propTypes = propTypes;\nSearch.defaultProps = defaultProps;\n\n// Avoid re-render\nconst areEqual = () => true;\n\nexport default React.memo(Search, areEqual);\n","import { parseStringPromise } from 'xml2js';\nimport { files as config } from 'config';\nimport { getFileType } from './data';\nimport {\n  hasProperty,\n  isEmpty,\n} from './data/validators';\nimport {\n  ID,\n  SHAPES,\n} from './constants';\nimport logger from './logger';\n\nconst getAttr = data => {\n  if (!data) return {};\n\n  const attr = data['$'];\n  if (!attr) return {};\n\n  return attr;\n};\n\nconst getChildren = data => {\n  if (!data) return [];\n\n  const children = data['$$'];\n  if (!children) return [];\n\n  return children;\n};\n\nconst getId = data => {\n  if (!data) return -1;\n\n  const id = data.match(/\\d+$/);\n  if (!id || id.length === 0) return -1;\n\n  return parseInt(id.shift(), 10);\n};\n\nconst getNumbers = data => {\n  if (!data) return [];\n\n  const trimmed = data.trim().replace(/  +/g, ' ');\n  if (trimmed.length === 0) return [];\n\n  const split = trimmed.split(' ');\n  const numbers = split.map(v => parseFloat(v));\n\n  return numbers;\n};\n\nconst buildAlternates = result => {\n  if (!result) return [];\n\n  let data = [];\n  for (const presentation in result) {\n    if (hasProperty(result, presentation)) {\n      const slides = result[presentation];\n\n      for (const slide in slides) {\n        if (hasProperty(slides, slide)) {\n          const text = slides[slide];\n\n          data.push({\n            src: `presentation/${presentation}/${slide}.png`,\n            text,\n          });\n        }\n      }\n    }\n  }\n\n  return data;\n};\n\n// TODO\nconst buildCaptions = result => {\n  if (!result) return [];\n\n  let data = [];\n  data = result;\n\n  return data;\n};\n\n// TODO\nconst buildPolls = result => {\n  if (!result) return [];\n\n  let data = [];\n  data = result;\n\n  return data;\n};\n\nconst buildExternalVideos = result => {\n  if (!result) return [];\n\n  const data = result.map(r => {\n    return {\n      timestamp: r.timestamp,\n      url: r.external_video_url,\n    };\n  });\n\n  return data;\n};\n\nconst buildMetadata = result => {\n  let data = {};\n  const { recording } = result;\n\n  if (hasProperty(recording, 'meeting')) {\n    const attr = getAttr(recording.meeting.shift());\n    const { id } = attr;\n    const meta = recording.meta.shift();\n    const end = parseInt(recording.end_time.shift(), 10);\n    const name = meta.name ? meta.name.shift() : attr.name;\n    const participants = parseInt(recording.participants.shift(), 10);\n    const start = parseInt(recording.start_time.shift(), 10);\n\n    data = {\n      end,\n      id,\n      name,\n      participants,\n      start,\n    };\n  }\n\n  return data;\n};\n\nconst buildNotes = result => {\n  if (!result) return '';\n\n  // Extract the notes' body\n  const regex = /<body>\\n.*\\n<\\/body>/g;\n  const match = result.match(regex);\n\n  let data = '';\n  if (!isEmpty(match)) {\n    data = match.shift();\n  }\n\n  return data;\n};\n\nconst buildStyle = data => {\n  const items = data.split(';');\n  let style = {};\n\n  items.forEach(item => {\n    const trimmed = item.trim();\n\n    if (trimmed.length === 0) return;\n\n    const split = trimmed.split(':').map(i => i.trim());\n\n    // Remove visibility\n    if (split[0] === 'visibility') return;\n\n    style[split[0]] = split[1];\n  });\n\n  return style;\n};\n\nconst buildSlides = image => {\n  let slides = [];\n\n  if (image) {\n    image.forEach(img => {\n      const attr = getAttr(img);\n      const src = attr['xlink:href'];\n\n      // Skip the logo\n      if (!src) return;\n\n      // Get the number from the id name\n      const slideId = getId(attr.id);\n      const timestamps = getNumbers(attr.in);\n\n      timestamps.forEach(timestamp => {\n        slides.push({\n          id: slideId,\n          height: parseInt(attr.height),\n          src,\n          timestamp,\n          width: parseInt(attr.width),\n        });\n      });\n    });\n\n    slides = slides.sort((a, b) => a.timestamp - b.timestamp);\n  }\n\n  return slides;\n};\n\nconst buildThumbnails = slides => {\n  const prefix = 'slide-';\n  const url = 'thumbnails/thumb-';\n\n  return slides.reduce((result, slide) => {\n    const {\n      id,\n      src,\n      timestamp,\n    } = slide;\n\n    if (src.includes(ID.DESKSHARE)) {\n      result.push({\n        id,\n        src: ID.SCREENSHARE,\n        timestamp,\n      });\n    } else {\n      result.push({\n        id,\n        src: src.replace(prefix, url),\n        timestamp,\n      });\n    }\n\n    return result;\n  }, []);\n};\n\nconst parseText = data => {\n  let text = '';\n\n  const children = getChildren(data);\n  if (!isEmpty(children)) {\n    const child = children.shift();\n    const grandchildren = getChildren(child);\n    if (!isEmpty(grandchildren)) {\n      text = grandchildren.map(grandchild => {\n        const name = grandchild['#name'];\n        if (name === 'br') return '\\r';\n\n        return grandchild['_'];\n      }).join('');\n    }\n  }\n\n  return text;\n};\n\nconst buildCanvases = group => {\n  let canvases = [];\n\n  if (group) {\n    canvases = group.map(canvas => {\n      const canvasAttr = getAttr(canvas);\n      // Get the number from the id name\n      const canvasId = getId(canvasAttr.id);\n\n      let draws = canvas.g.map(g => {\n        const drawAttr = getAttr(g);\n        const timestamp = parseFloat(drawAttr.timestamp);\n        const clear = parseFloat(drawAttr.undo);\n        const style = buildStyle(drawAttr.style);\n        const drawId = getId(drawAttr.shape);\n\n        let shape = {};\n        if (g.image) {\n          shape.type = SHAPES.POLL;\n          const image = getAttr(g.image.shift());\n          // TODO: Better adapt for old versions\n          // Versions prior to 2.3 included a rect structure along with an image\n          if (g.rect) {\n            const rect = getAttr(g.rect.shift());\n            shape.data = Object.assign({ rect }, { image });\n          } else {\n            shape.data = Object.assign({ image });\n          }\n        } else if (g.polyline) {\n          shape.type = SHAPES.POLYLINE;\n          shape.data = Object.assign({}, getAttr(g.polyline.shift()));\n        } else if (g.line) {\n          shape.type = SHAPES.LINE;\n          shape.data = Object.assign({}, getAttr(g.line.shift()));\n        } else if (g.polygon) {\n          shape.type = SHAPES.POLYGON;\n          shape.data = Object.assign({}, getAttr(g.polygon.shift()));\n        } else if (g.circle) {\n          shape.type = SHAPES.CIRCLE;\n          shape.data = Object.assign({}, getAttr(g.circle.shift()));\n        } else if (g.path) {\n          shape.type = SHAPES.PATH;\n          shape.data = Object.assign({}, getAttr(g.path.shift()));\n        } else if (g.switch) {\n          shape.type = SHAPES.TEXT;\n          const foreignObject = g.switch.shift()['foreignObject'].shift();\n          const text = parseText(foreignObject);\n          shape.data = Object.assign({ text }, getAttr(foreignObject));\n        }\n\n        return {\n          clear,\n          id: drawId,\n          shape,\n          style,\n          timestamp,\n        };\n      });\n\n      return {\n        draws,\n        id: canvasId,\n      };\n    });\n  }\n\n  return canvases;\n};\n\nconst buildShapes = result => {\n  let data = {};\n  const { svg } = result;\n\n  if (svg) {\n    const {\n      image,\n      g,\n    } = svg;\n\n    data.slides = buildSlides(image);\n    data.thumbnails = buildThumbnails(data.slides);\n    data.canvases = buildCanvases(g);\n  }\n\n  return data;\n};\n\nconst buildPanzooms = result => {\n  let data = [];\n  const { recording } = result;\n\n  if (hasProperty(recording, 'event')) {\n    data = recording.event.map(panzoom => {\n      const attr = getAttr(panzoom);\n      const viewbox = getNumbers(panzoom.viewBox.shift());\n\n      return {\n        timestamp: parseFloat(attr.timestamp),\n        x: viewbox.shift(),\n        y: viewbox.shift(),\n        width: viewbox.shift(),\n        height: viewbox.shift(),\n      };\n    });\n  }\n\n  return data;\n};\n\nconst buildCursor = result => {\n  let data = [];\n  const { recording } = result;\n\n  if (hasProperty(recording, 'event')) {\n    data = recording.event.map(cursor => {\n      const attr = getAttr(cursor);\n      const position = getNumbers(cursor.cursor.shift());\n\n      return {\n        timestamp: parseFloat(attr.timestamp),\n        x: position.shift(),\n        y: position.shift(),\n      };\n    });\n  }\n\n  return data;\n};\n\nconst clearHyperlink = message => {\n  const regex = /<a href=\"(.*)\" rel=\"nofollow\"><u>\\1<\\/u><\\/a>/g;\n\n  return message.replace(regex, '$1');\n};\n\nconst decodeXML = message => {\n  return message\n    .replace(/&(quot|#34);/g, '\"')\n    .replace(/&(amp|#38);/g, '&')\n    .replace(/&(apos|#39);/g, \"'\")\n    .replace(/&(lt|#60);/g, '<')\n    .replace(/&(gt|#62);/g, '>');\n};\n\nconst getInitials = name => {\n  let initials;\n\n  if (name) {\n    initials = name\n      .slice(0, 2)\n      .toLowerCase()\n      .trim();\n  }\n\n  return initials;\n};\n\nconst buildChat = result => {\n  const { popcorn } = result;\n  let data = [];\n\n  if (hasProperty(popcorn, 'chattimeline')) {\n    const { chattimeline } = popcorn;\n    data = chattimeline.map(chat => {\n      const attr = getAttr(chat);\n      const clear = attr.out ? parseFloat(attr.out) : -1;\n      const message = decodeXML(clearHyperlink(attr.message));\n      const initials = getInitials(attr.name);\n\n      return {\n        clear,\n        hyperlink: message !== attr.message,\n        initials,\n        name: attr.name,\n        message,\n        timestamp: parseFloat(attr.in),\n      };\n    });\n  }\n\n  return data;\n};\n\nconst buildScreenshare = result => {\n  let data = [];\n  const { recording } = result;\n\n  if (hasProperty(recording, 'event')) {\n    data = recording.event.map(screenshare => {\n      const attr = getAttr(screenshare);\n\n      return {\n        timestamp: parseFloat(attr.start_timestamp),\n        clear: parseFloat(attr.stop_timestamp),\n      };\n    });\n  }\n\n  return data;\n};\n\nconst getOptions = filename => {\n  let options = {};\n\n  switch (filename) {\n    case config.data.shapes:\n      options = {\n        explicitChildren: true,\n        preserveChildrenOrder: true,\n        charsAsChildren: true,\n      };\n      break;\n    default:\n  }\n\n  return options;\n};\n\nconst build = (filename, value) => {\n  return new Promise((resolve, reject) => {\n    let data;\n    const fileType = getFileType(filename);\n\n    if (fileType === 'json') {\n      switch (filename) {\n        case config.data.alternates:\n          data = buildAlternates(value);\n          break;\n        case config.data.captions:\n          data = buildCaptions(value);\n          break;\n        case config.data.polls:\n          data = buildPolls(value);\n          break;\n        case config.data.externalVideos:\n          data = buildExternalVideos(value);\n          break;\n        default:\n          logger.debug('unhandled', 'json', filename);\n          reject(filename);\n      }\n      resolve(data);\n    } else if (fileType === 'html') {\n      switch (filename) {\n        case config.data.notes:\n          data = buildNotes(value);\n          break;\n        default:\n          logger.debug('unhandled', 'html', filename);\n          reject(filename);\n      }\n      resolve(data);\n    } else {\n      if (!value) {\n        logger.warn('missing', filename);\n\n        return resolve(null);\n      }\n\n      // Parse XML data\n      const options = getOptions(filename);\n      parseStringPromise(value, options).then(result => {\n        switch (filename) {\n          case config.data.chat:\n            data = buildChat(result);\n            break;\n          case config.data.cursor:\n            data = buildCursor(result);\n            break;\n          case config.data.metadata:\n            data = buildMetadata(result);\n            break;\n          case config.data.panzooms:\n            data = buildPanzooms(result);\n            break;\n          case config.data.screenshare:\n            data = buildScreenshare(result);\n            break;\n          case config.data.shapes:\n            data = buildShapes(result);\n            break;\n          default:\n            logger.debug('unhandled', 'xml', filename);\n            reject(filename);\n        }\n        resolve(data);\n      }).catch(error => reject(error));\n    }\n  });\n};\n\nconst addAlternatesToThumbnails = (thumbnails, alternates) => {\n  const prefix = 'thumbnails/thumb-';\n  const url = 'slide-';\n\n  return thumbnails.map(thumbnail => {\n    const { src } = thumbnail;\n    thumbnail.alt = '';\n\n    const found = alternates.find(alt => src.replace(prefix, url) === alt.src);\n    if (found) thumbnail.alt = found.text;\n\n    return thumbnail;\n  });\n};\n\nconst mergeChatContent = (chat, polls, externalVideos) => {\n  return [\n    ...chat,\n    ...externalVideos,\n    ...polls,\n  ].sort((a, b) => a.timestamp - b.timestamp);\n};\n\nexport {\n  addAlternatesToThumbnails,\n  build,\n  buildStyle,\n  decodeXML,\n  getAttr,\n  getId,\n  getNumbers,\n  mergeChatContent,\n};\n","import { controls } from 'config';\nimport {\n  getContentFromData,\n  getControlFromLayout,\n  getSectionFromLayout,\n  getSwapFromLayout,\n} from './data';\nimport { isContentVisible } from './data/validators';\n\nexport default class Layout {\n  constructor(data, layout) {\n    this.content = getContentFromData(data);\n    this.layout = layout;\n  }\n\n  getContent() {\n    return this.content;\n  }\n\n  initControl() {\n    return getControlFromLayout(this.layout);\n  }\n\n  initSection() {\n    return getSectionFromLayout(this.layout);\n  }\n\n  initSwap() {\n    return getSwapFromLayout(this.layout);\n  }\n\n  getBottomContentStyle(state) {\n    const {\n      fullscreen,\n      thumbnails,\n    } = state;\n\n    const bottom = thumbnails && !fullscreen;\n    const style = { 'inactive': !bottom };\n\n    return style;\n  }\n\n  getContentStyle(state) {\n    const { swap } = state;\n    const style = { 'swapped-content': swap };\n\n    return style;\n  }\n\n  getMediaStyle(state) {\n    const { swap } = state;\n    const single = this.isSingle();\n    const style = { 'swapped-media': swap || single };\n\n    return style;\n  }\n\n  getPlayerStyle(state) {\n    const {\n      fullscreen,\n      section,\n    } = state;\n\n    const single = this.isSingle();\n\n    const style = {\n      'fullscreen-content': fullscreen,\n      'hidden-section': !section,\n      'single-content': single,\n    };\n\n    return style;\n  }\n\n  hasFullscreenButton(layout, state) {\n    const {\n      control,\n      swap,\n    } = state;\n\n    if (!control || !controls.fullscreen) return false;\n\n    const single = this.isSingle();\n    if (!isContentVisible(layout, swap || single)) return false;\n\n    return true;\n  }\n\n  hasScreenshare() {\n    const { screenshare } = this.content;\n\n    return screenshare;\n  }\n\n  isSingle() {\n    const {\n      presentation,\n      screenshare,\n    } = this.content;\n\n    return !presentation && !screenshare;\n  }\n}\n","import { shortcuts as config } from 'config';\nimport logger from './logger';\n\nexport default class Shortcuts {\n  constructor(actions) {\n    this.enabled = config.enabled;\n\n    if (!this.enabled) {\n      logger.debug('shortcuts', 'disabled');\n    } else {\n      this.init(actions);\n    }\n  }\n\n  init(actions) {\n    this.listeners = [];\n\n    for (let prop in actions) {\n      const value = actions[prop];\n      if (typeof value === 'function') {\n        const key = config[prop];\n        this.add(key, value);\n      } else {\n        for (let p in value) {\n          const k = config[prop][p];\n          const v = value[p];\n          this.add(k, v);\n        }\n      }\n    }\n  }\n\n  add(key, action) {\n    if (!key || typeof key !== 'string') {\n      logger.warn('shortcuts', 'invalid', 'key');\n      return null;\n    } else if (key.length === 0) {\n      return null;\n    }\n\n    if (!action || typeof action !== 'function') {\n      logger.warn('shortcuts', 'invalid', 'action');\n      return null;\n    }\n\n    const listener = document.addEventListener('keydown', (e) => {\n      if (e.altKey && e.shiftKey) {\n        if (e.key === key) action();\n      }\n    });\n\n    this.listeners.push(listener);\n  }\n\n  destroy() {\n    this.listeners.forEach(listener => {\n      document.removeEventListener(listener);\n    });\n  }\n}\n","import logger from './logger';\n\nconst STATUSES = [\n  'canplay',\n  'seeking',\n  'waiting',\n];\n\nconst EVENTS = [\n  'abort',\n  'canplay',\n  'canplaythrough',\n  'durationchange',\n  'emptied',\n  'encrypted',\n  'ended',\n  'error',\n  'interruptbegin',\n  'interruptend',\n  'loadeddata',\n  'loadedmetadata',\n  'loadstart',\n  'mozaudioavailable',\n  'pause',\n  'play',\n  'playing',\n  'progress',\n  'ratechange',\n  'seeked',\n  'seeking',\n  'stalled',\n  'suspend',\n  //'timeupdate',\n  'volumechange',\n  'waiting',\n];\n\nexport default class Synchronizer {\n  constructor(primary, secondary) {\n    this.primary = primary;\n    this.secondary = secondary;\n\n    this.status = {\n      primary: 'waiting',\n      secondary: 'waiting',\n    }\n\n    this.synching = false;\n\n    this.init();\n  }\n\n  init() {\n    STATUSES.forEach(status => {\n      this.primary.on(status, () => this.status.primary = status);\n      this.secondary.on(status, () => this.status.secondary = status);\n    });\n\n    this.primary.on('play', () => this.secondary.play());\n    this.primary.on('pause', () => this.secondary.pause());\n\n    this.primary.on('seeking', () => {\n      const currentTime = this.primary.currentTime();\n      this.secondary.currentTime(currentTime);\n    });\n\n    this.primary.on('ratechange', () => {\n      const playbackRate = this.primary.playbackRate();\n      this.secondary.playbackRate(playbackRate);\n    });\n\n    this.primary.on('waiting', () => {\n      if (!this.synching && this.status.secondary === 'canplay') {\n        this.synching = true;\n        this.primary.pause();\n      }\n    });\n\n    this.primary.on('canplay', () => {\n      if (this.synching) {\n        this.synching = false;\n        this.primary.play();\n      }\n    });\n\n    this.secondary.on('waiting', () => {\n      if (!this.synching && this.status.primary === 'canplay') {\n        this.synching = true;\n        this.primary.pause();\n      }\n    });\n\n    this.secondary.on('canplay', () => {\n      if (this.synching) {\n        this.synching = false;\n        this.primary.play();\n      }\n    });\n\n    EVENTS.forEach(event => {\n      this.primary.on(event, () => logger.debug(`primary ${event} ${this.status.primary}`));\n      this.secondary.on(event, () => logger.debug(`secondary ${event} ${this.status.secondary}`));\n    });\n  }\n}\n","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { defineMessages } from 'react-intl';\nimport { shortcuts } from 'config';\nimport Chat from './chat';\nimport Notes from './notes';\nimport Presentation from './presentation';\nimport Screenshare from './screenshare';\nimport Thumbnails from './thumbnails';\nimport Video from './video';\nimport BottomBar from './bars/bottom';\nimport TopBar from './bars/top';\nimport AboutModal from './modals/about';\nimport SearchModal from './modals/search';\nimport Button from './utils/button';\nimport {\n  seek,\n  skip,\n} from 'utils/actions';\nimport {\n  addAlternatesToThumbnails,\n  mergeChatContent,\n} from 'utils/builder';\nimport {\n  ID,\n  LAYOUT,\n} from 'utils/constants';\nimport {\n  getActiveContent,\n  getCurrentDataIndex,\n  getCurrentDataInterval,\n  getData,\n  getDraws,\n} from 'utils/data';\nimport { isEqual } from 'utils/data/validators';\nimport Layout from 'utils/layout';\nimport logger from 'utils/logger';\nimport Shortcuts from 'utils/shortcuts';\nimport Synchronizer from 'utils/synchronizer';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  aria: {\n    id: 'player.wrapper.aria',\n    description: 'Aria label for the player wrapper',\n  },\n  fullscreen: {\n    id: 'button.fullscreen.aria',\n    description: 'Aria label for the fullscreen button',\n  },\n  restore: {\n    id: 'button.restore.aria',\n    description: 'Aria label for the restore button',\n  },\n});\n\nexport default class Player extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    const {\n      data,\n      layout,\n    } = props;\n\n    this.layout = new Layout(data, layout);\n\n    this.state = {\n      application: ID.CHAT,\n      control: this.layout.initControl(),\n      fullscreen: false,\n      modal: '',\n      search: [],\n      section: this.layout.initSection(),\n      swap: this.layout.initSwap(),\n      thumbnails: true,\n      time: 0,\n    }\n\n    this.player = {\n      video: null,\n      screenshare: null,\n    };\n\n    this.initData(data);\n\n    this.handlePlayerReady = this.handlePlayerReady.bind(this);\n    this.handleSearch = this.handleSearch.bind(this);\n    this.handleTimeUpdate = this.handleTimeUpdate.bind(this);\n  }\n\n  componentDidMount() {\n    this.initShortcuts();\n  }\n\n  componentWillUnmount() {\n    if (this.shortcuts) {\n      this.shortcuts.destroy();\n    }\n  }\n\n  initData(data) {\n    this.alternates = getData(data, ID.ALTERNATES);\n    this.captions = getData(data, ID.CAPTIONS);\n    this.chat = mergeChatContent(\n      getData(data, ID.CHAT),\n      getData(data, ID.POLLS),\n      getData(data, ID.EXTERNAL_VIDEOS),\n    );\n    this.cursor = getData(data, ID.CURSOR);\n    this.metadata = getData(data, ID.METADATA);\n    this.notes = getData(data, ID.NOTES);\n    this.panzooms = getData(data, ID.PANZOOMS);\n    this.screenshare = getData(data, ID.SCREENSHARE);\n    this.shapes = getData(data, ID.SHAPES);\n\n    this.canvases = this.shapes.canvases;\n    this.slides = this.shapes.slides;\n    this.thumbnails = addAlternatesToThumbnails(this.shapes.thumbnails, this.alternates);\n\n    logger.debug(ID.PLAYER, data);\n  }\n\n  handlePlayerReady(media, player) {\n    switch (media) {\n      case ID.VIDEO:\n        logger.debug(ID.PLAYER, 'ready', ID.VIDEO);\n        this.player.video = player;\n        break;\n      case ID.SCREENSHARE:\n        logger.debug(ID.PLAYER, 'ready', ID.SCREENSHARE);\n        this.player.screenshare = player;\n        break;\n      default:\n        logger.debug('unhandled', media);\n    }\n\n    if (this.player.video && this.player.screenshare) {\n      this.synchronizer = new Synchronizer(this.player.video, this.player.screenshare);\n    }\n  }\n\n  handleSearch(value) {\n    const { search } = this.state;\n\n    if (!isEqual(search, value)) {\n      this.setState({ search: value });\n    }\n  }\n\n  handleTimeUpdate(value) {\n    const { time } = this.state;\n\n    if (time !== value) {\n      this.setState({ time: value });\n    }\n  }\n\n  initShortcuts() {\n    const { seconds } = shortcuts.video;\n\n    const actions = {\n      fullscreen: () => this.toggleFullscreen(),\n      section: () => this.toggleSection(),\n      swap: () => this.toggleSwap(),\n      thumbnails: () => this.toggleThumbnails(),\n      slides: {\n        next: () => skip(this.player, this.slides, +1),\n        previous: () => skip(this.player, this.slides, -1),\n      },\n      video: {\n        backward: () => seek(this.player, -seconds),\n        forward: () => seek(this.player, +seconds),\n      },\n    };\n\n    this.shortcuts = new Shortcuts(actions);\n  }\n\n  toggleApplication(type) {\n    const { application } = this.state;\n\n    if (application === type) return null;\n\n    this.setState({ application: type });\n  }\n\n  toggleFullscreen() {\n    const { fullscreen } = this.state;\n\n    this.setState({ fullscreen: !fullscreen });\n  }\n\n  toggleModal(type) {\n    const { modal } = this.state;\n    const open = modal.length > 0;\n\n    this.setState({ modal: open ? '' : type });\n  }\n\n  toggleSection() {\n    const { section } = this.state;\n\n    this.setState({ section: !section });\n  }\n\n  toggleSwap() {\n    const { swap } = this.state;\n\n    this.setState({ swap: !swap });\n  }\n\n  toggleThumbnails() {\n    const { thumbnails } = this.state;\n\n    this.setState({ thumbnails: !thumbnails });\n  }\n\n  renderFullscreenButton(layout) {\n    if (!this.layout.hasFullscreenButton(layout, this.state)) return null;\n\n    const { intl } = this.props;\n    const { fullscreen } = this.state;\n\n    const aria = fullscreen\n      ? intl.formatMessage(intlMessages.restore)\n      : intl.formatMessage(intlMessages.fullscreen)\n    ;\n\n    const icon = fullscreen ? 'restore' : 'fullscreen';\n\n    return (\n      <div className=\"fullscreen-button\">\n        <Button\n          aria={aria}\n          handleOnClick={() => this.toggleFullscreen()}\n          icon={icon}\n          type=\"solid\"\n        />\n      </div>\n    );\n  }\n\n  renderModal() {\n    const { modal } = this.state;\n    const open = modal.length > 0;\n\n    if (!open) return null;\n\n    const content = this.layout.getContent();\n\n    switch (modal) {\n      case ID.ABOUT:\n        return (\n          <AboutModal\n            content={content}\n            metadata={this.metadata}\n            toggleModal={() => this.toggleModal(ID.ABOUT)}\n          />\n        );\n      case ID.SEARCH:\n        return (\n          <SearchModal\n            handleSearch={this.handleSearch}\n            metadata={this.metadata}\n            thumbnails={this.thumbnails}\n            toggleModal={() => this.toggleModal(ID.SEARCH)}\n          />\n        );\n      default:\n        return null;\n    }\n  }\n\n  renderThumbnails() {\n    const {\n      search,\n      time,\n    } = this.state;\n\n    const { video } = this.player;\n\n    const currentDataIndex = getCurrentDataIndex(this.thumbnails, time);\n\n    return (\n      <Thumbnails\n        currentDataIndex={currentDataIndex}\n        handleSearch={this.handleSearch}\n        interactive={true}\n        player={video}\n        recordId={this.metadata.id}\n        search={search}\n        thumbnails={this.thumbnails}\n      />\n    );\n  }\n\n  renderTopBar() {\n    const {\n      control,\n      section,\n    } = this.state;\n\n    const {\n      name,\n      start,\n    } = this.metadata;\n\n    const single = this.layout.isSingle();\n\n    return (\n      <TopBar\n        control={control}\n        name={name}\n        section={section}\n        single={single}\n        start={start}\n        toggleAbout={() => this.toggleModal(ID.ABOUT)}\n        toggleSearch={() => this.toggleModal(ID.SEARCH)}\n        toggleSection={() => this.toggleSection()}\n        toggleSwap={() => this.toggleSwap()}\n      />\n    );\n  }\n\n  renderMedia() {\n    const {\n      data,\n      time,\n    } = this.props;\n\n    const { media } = data;\n\n    return (\n      <div className={cx('media', this.layout.getMediaStyle(this.state))}>\n        {this.renderFullscreenButton(LAYOUT.MEDIA)}\n        <Video\n          captions={this.captions}\n          key={ID.VIDEO}\n          media={media}\n          onPlayerReady={this.handlePlayerReady}\n          onTimeUpdate={this.handleTimeUpdate}\n          recordId={this.metadata.id}\n          time={time}\n        />\n      </div>\n    );\n  }\n\n  renderApplicationIcon(type) {\n    const { application } = this.state;\n    const active = application === type;\n\n    return (\n      <div\n        className={cx('application-icon', { inactive: !active })}\n        onClick={() => active ? null : this.toggleApplication(type)}\n      >\n        <span className={`icon-${type}`} />\n      </div>\n    );\n  }\n\n  renderApplicationContent() {\n    const { application } = this.state;\n\n    switch (application) {\n      case ID.CHAT:\n        const { time } = this.state;\n        const { video } = this.player;\n        const currentChatIndex = getCurrentDataIndex(this.chat, time);\n\n        return (\n          <Chat\n            chat={this.chat}\n            currentDataIndex={currentChatIndex}\n            player={video}\n          />\n        );\n      case ID.NOTES:\n        return (\n          <Notes notes={this.notes} />\n        );\n      default:\n        return null;\n    }\n  }\n\n  renderApplicationControl() {\n    const { control } = this.state;\n\n    if (!control) return null;\n\n    return (\n      <div className=\"application-control\">\n        {this.renderApplicationIcon(ID.CHAT)}\n        {this.renderApplicationIcon(ID.NOTES)}\n      </div>\n    );\n  }\n\n  renderApplication() {\n    return (\n      <div className=\"application\">\n        {this.renderApplicationControl()}\n        {this.renderApplicationContent()}\n      </div>\n    );\n  }\n\n  renderPresentation(active) {\n    const { time } = this.state;\n\n    const currentSlideIndex = getCurrentDataIndex(this.slides, time);\n    const currentPanzoomIndex = getCurrentDataIndex(this.panzooms, time);\n    const currentCursorIndex = getCurrentDataIndex(this.cursor, time);\n    const draws = getDraws(currentSlideIndex, this.slides, this.canvases);\n    const currentDrawsInterval = getCurrentDataInterval(draws, time);\n\n    return (\n      <Presentation\n        active={active}\n        currentCursorIndex={currentCursorIndex}\n        currentPanzoomIndex={currentPanzoomIndex}\n        currentSlideIndex={currentSlideIndex}\n        cursors={this.cursor}\n        draws={draws}\n        drawsInterval={currentDrawsInterval}\n        panzooms={this.panzooms}\n        recordId={this.metadata.id}\n        slides={this.slides}\n        thumbnails={this.thumbnails}\n      />\n    )\n  }\n\n  renderScreenshare(active) {\n    if (!this.layout.hasScreenshare()) return null;\n\n    const { data } = this.props;\n\n    const { media } = data;\n\n    return (\n      <Screenshare\n        active={active}\n        key={ID.SCREENSHARE}\n        media={media}\n        onPlayerReady={this.handlePlayerReady}\n        recordId={this.metadata.id}\n      />\n    );\n  }\n\n  renderContent() {\n    if (this.layout.isSingle()) return null;\n\n    const { time } = this.state;\n    const content = getActiveContent(this.screenshare, time);\n\n    return (\n      <div className={cx('content', this.layout.getContentStyle(this.state))}>\n        {this.renderFullscreenButton(LAYOUT.CONTENT)}\n        <div className=\"top-content\">\n          {this.renderPresentation(content === ID.PRESENTATION)}\n          {this.renderScreenshare(content === ID.SCREENSHARE)}\n        </div>\n        <div className={cx('bottom-content', this.layout.getBottomContentStyle(this.state))}>\n          {this.renderThumbnails()}\n        </div>\n      </div>\n    );\n  }\n\n  renderBottomBar() {\n    return <BottomBar />;\n  }\n\n  render() {\n    const { intl } = this.props;\n\n    return (\n      <div\n        aria-label={intl.formatMessage(intlMessages.aria)}\n        className={cx('player-wrapper', this.layout.getPlayerStyle(this.state))}\n        id={ID.PLAYER}\n      >\n        {this.renderTopBar()}\n        {this.renderMedia()}\n        {this.renderApplication()}\n        {this.renderContent()}\n        {this.renderBottomBar()}\n        {this.renderModal()}\n      </div>\n    );\n  }\n}\n","import React, { useRef, useState } from 'react';\nimport {\n  defineMessages,\n  useIntl,\n} from 'react-intl';\nimport config from 'config';\nimport Error from './error';\nimport Player from './player';\nimport { build } from 'utils/builder';\nimport { ID } from 'utils/constants';\nimport {\n  buildFileURL,\n  getFileName,\n  getFileType,\n} from 'utils/data';\nimport {\n  getLayout,\n  getRecordId,\n  getTime,\n} from 'utils/params';\nimport logger from 'utils/logger';\nimport './index.scss';\n\nconst intlMessages = defineMessages({\n  aria: {\n    id: 'loader.wrapper.aria',\n    description: 'Aria label for the loader wrapper',\n  },\n});\n\nconst initError = (recordId) => recordId ? null : config.error['NOT_FOUND'];\n\nconst Loader = ({ match }) => {\n  const intl = useIntl();\n  const counter = useRef(0);\n  const data = useRef({});\n  const layout = useRef(getLayout());\n  const recordId = useRef(getRecordId(match));\n  const started = useRef(false);\n  const time = useRef(getTime());\n\n  const [error, setError] = useState(initError(recordId));\n  const [loaded, setLoaded] = useState(false);\n\n  const fetchFile = (file) => {\n    const url = buildFileURL(recordId.current, file);\n    fetch(url).then(response => {\n      if (response.ok) {\n        logger.debug(ID.LOADER, file, response);\n        const fileType = getFileType(file);\n        switch (fileType) {\n          case 'json':\n            return response.json();\n          case 'html':\n            return response.text();\n          case 'svg':\n            return response.text();\n          case 'xml':\n            return response.text();\n          default:\n            setError(config.error['BAD_REQUEST']);\n            return null;\n        }\n      } else {\n        logger.warn('loader', file, response);\n        return null;\n      }\n    }).then(value => {\n      build(file, value).then(content => {\n        if (content) logger.debug(ID.LOADER, 'builded', file);\n        data.current[getFileName(file)] = content;\n        update();\n      }).catch(error => setError(config.error['BAD_REQUEST']));\n    }).catch(error => setError(config.error['NOT_FOUND']));\n  };\n\n  const fetchMedia = () => {\n    const fetches = config.medias.map(type => {\n      const url = buildFileURL(recordId.current, `video/webcams.${type}`);\n      return fetch(url, { method: 'HEAD' });\n    });\n\n    Promise.all(fetches).then(responses => {\n      const media = [];\n      responses.forEach(response => {\n        const { ok, url } = response;\n        if (ok) {\n          logger.debug(ID.LOADER, 'media', response);\n          media.push(config.medias.find(type => url.endsWith(type)));\n        }\n      });\n\n      if (media.length > 0) {\n        data.current.media = media;\n        update();\n      } else {\n        // TODO: Handle audio medias\n        setError(config.error['NOT_FOUND']);\n      }\n    });\n  };\n\n  const update = () => {\n    counter.current = counter.current + 1;\n    // TODO: Better control\n    if (counter.current > Object.keys(config.files.data).length) {\n      if (!loaded) setLoaded(true);\n    }\n  };\n\n  if (!started.current) {\n    started.current = true;\n\n    if (recordId.current) {\n      for (const file in config.files.data) {\n        fetchFile(config.files.data[file]);\n      }\n\n      fetchMedia();\n    }\n  }\n\n  if (error) return <Error code={error} />;\n\n  if (loaded) {\n    return (\n      <Player\n        data={data.current}\n        intl={intl}\n        layout={layout.current}\n        time={time.current}\n      />\n    );\n  }\n\n  return (\n    <div\n      aria-label={intl.formatMessage(intlMessages.aria)}\n      className=\"loader-wrapper\"\n      id={ID.LOADER}\n    >\n      <div className=\"loading-dots\">\n        <div className=\"first\" />\n        <div className=\"second\" />\n        <div className=\"third\" />\n      </div>\n    </div>\n  );\n};\n\nexport default Loader;\n","import ar from './ar.json';\nimport de from './de.json';\nimport en from './en.json';\nimport es from './es.json';\nimport fa from './fa.json';\nimport fr from './fr.json';\nimport it from './it.json';\nimport ja from './ja.json';\nimport pt from './pt.json';\nimport ru from './ru.json';\nimport tr from './tr.json';\n\nconst messages = {\n  ar,\n  de,\n  en,\n  es,\n  fa,\n  fr,\n  it,\n  ja,\n  pt,\n  ru,\n  tr,\n};\n\nexport default messages;\n","import { locale as config } from 'config';\nimport messages from './messages';\n\nconst RTL_LOCALES = ['ar', 'fa'];\n\nconst setDirection = (locale) => {\n  if (RTL_LOCALES.includes(locale)) {\n    document.body.parentNode.setAttribute('dir', 'rtl');\n  } else {\n    document.body.parentNode.setAttribute('dir', 'ltr');\n  }\n};\n\nconst getLocale = () => {\n  const locale = navigator.language.split(/[-_]/)[0];\n\n  setDirection(locale);\n\n  if (!messages[locale]) return config.default;\n\n  return locale;\n};\n\nconst getMessages = () => {\n  return messages;\n};\n\nexport {\n  getLocale,\n  getMessages,\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { IntlProvider } from \"react-intl\";\nimport Loader from 'components/loader';\nimport Router from 'components/router';\nimport {\n  getLocale,\n  getMessages,\n} from 'locales';\nimport { ROUTER } from 'utils/constants';\nimport { getStyle } from 'utils/params';\nimport './index.scss';\n\nconst locale = getLocale();\nconst messages = getMessages();\nconst style = getStyle();\n\nReactDOM.render(\n  (\n    <IntlProvider\n      locale={locale}\n      messages={messages[locale]}\n    >\n      {style ? <link rel=\"stylesheet\" type=\"text/css\" href={style} /> : null}\n      {ROUTER ? <Router /> : <Loader />}\n    </IntlProvider>\n  ),\n  document.getElementById('root')\n);\n"],"sourceRoot":""}